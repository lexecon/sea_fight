!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(){w.show(),m.loadRivalsPromise.then(function(e){w.publish("addRival",e)})}var r=n(2)["default"];n(4);var i=n(8),o=r(i),s=n(118),c=r(s),u=n(134),l=r(u),d=n(143),f=r(d),h=n(148),p=r(h),b=n(153),g=r(b),m=new o["default"],v=new c["default"],y=new l["default"],_=new f["default"],w=new p["default"];window.Users=function(e){e=e||{},this.objectId=e.objectId||null},window.Users.prototype.___class="Users",m.subscribe("loginSuccess",function(){v.publish("loginSuccess",m.getUser().name),y.hide().then(function(){a()})}),m.subscribe("loginError",function(){return y.addErrorState()}),m.subscribe("registrationSuccess",function(){v.publish("loginSuccess",m.getUser().name),_.hide().then(function(){a()})}),m.subscribe("registrationError",function(){return _.addErrorState()}),y.show(),y.subscribe("loginClick",function(e){return m.login(e)}),y.subscribe("registrationClick",function(){y.hide().then(function(){_.show()})}),_.subscribe("clickBack",function(){_.hide().then(function(){y.show()})}),_.subscribe("clickRegistration",function(e){return m.registration(e)}),w.subscribe("selectRival",function(e){m.setRival(e),w.hide(),v.publish("selectRival",m.getRival().name)}),v.subscribe("showGameName",function(e){var t=document.querySelector("#content_layout h1");t.innerText=e}),v.subscribe("gameSuccess",function(){return new g["default"]({title:"Ура победа!"}).show()}),v.subscribe("gameFail",function(){return new g["default"]({title:"Ты проиграл ("}).show()})},,function(e,t,n){e.exports=n(3)},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){return e&&e.__esModule?e:{"default":e}}},function(e,t){},,,,function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(89)["default"],o=n(94)["default"],s=n(96)["default"],c=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(112),l=c(u),d=n(116),f=c(d),h=function(e){function t(){var e=this;o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.data="",this.rival=null,this.backendless=new l["default"],this.subscribe("loginSuccess",function(){return e.loadRivals()}),this.subscribe("registrationSuccess",function(){return e.loadRivals()}),this.loadRivalsPromise=new s(function(t,n){e.resolveLoadRivals=t,e.rejectLoadRivals=n})}return r(t,e),i(t,[{key:"login",value:function(e){var t=this;this.backendless.login(e).then(function(e){t.data=e,t.publish("loginSuccess")})["catch"](function(){t.publish("loginError")})}},{key:"registration",value:function(e){var t=this;this.backendless.registration(e).then(function(e){t.data=e,t.publish("registrationSuccess")})["catch"](function(){return t.publish("registrationError")})}},{key:"loadRivals",value:function(){var e=this,t=this.backendless.getUsers().data,n=[];t.forEach(function(t){t.email!=e.data.email&&n.push(t)}),this.resolveLoadRivals(n)}},{key:"setRival",value:function(e){this.rival=e,this.publish("setRivalSuccess",e)}},{key:"getUser",value:function(){return this.data}},{key:"getRival",value:function(){return this.rival}}]),t}(f["default"]);t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(10),i=a(r),o=n(36),s=a(o);t["default"]=function c(e,t,n){null===e&&(e=Function.prototype);var a=(0,s["default"])(e,t);if(void 0===a){var r=(0,i["default"])(e);return null===r?void 0:c(r,t,n)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(n)}},function(e,t,n){e.exports={"default":n(11),__esModule:!0}},function(e,t,n){n(12),e.exports=n(23).Object.getPrototypeOf},function(e,t,n){var a=n(13),r=n(15);n(21)("getPrototypeOf",function(){return function(e){return r(a(e))}})},function(e,t,n){var a=n(14);e.exports=function(e){return Object(a(e))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var a=n(16),r=n(13),i=n(17)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),a(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var a=n(18)("keys"),r=n(20);e.exports=function(e){return a[e]||(a[e]=r(e))}},function(e,t,n){var a=n(19),r="__core-js_shared__",i=a[r]||(a[r]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=0,a=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+a).toString(36))}},function(e,t,n){var a=n(22),r=n(23),i=n(32);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],o={};o[e]=t(n),a(a.S+a.F*i(function(){n(1)}),"Object",o)}},function(e,t,n){var a=n(19),r=n(23),i=n(24),o=n(26),s="prototype",c=function(e,t,n){var u,l,d,f=e&c.F,h=e&c.G,p=e&c.S,b=e&c.P,g=e&c.B,m=e&c.W,v=h?r:r[t]||(r[t]={}),y=v[s],_=h?a:p?a[t]:(a[t]||{})[s];h&&(n=t);for(u in n)l=!f&&_&&void 0!==_[u],l&&u in v||(d=l?_[u]:n[u],v[u]=h&&"function"!=typeof _[u]?n[u]:g&&l?i(d,a):m&&_[u]==d?function(e){var t=function(t,n,a){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,a)}return e.apply(this,arguments)};return t[s]=e[s],t}(d):b&&"function"==typeof d?i(Function.call,d):d,b&&((v.virtual||(v.virtual={}))[u]=d,e&c.R&&y&&!y[u]&&o(y,u,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){var n=e.exports={version:"2.1.3"};"number"==typeof __e&&(__e=n)},function(e,t,n){var a=n(25);e.exports=function(e,t,n){if(a(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,r){return e.call(t,n,a,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var a=n(27),r=n(35);e.exports=n(31)?function(e,t,n){return a.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var a=n(28),r=n(30),i=n(34),o=Object.defineProperty;t.f=n(31)?Object.defineProperty:function(e,t,n){if(a(e),t=i(t,!0),a(n),r)try{return o(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var a=n(29);e.exports=function(e){if(!a(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(31)&&!n(32)(function(){return 7!=Object.defineProperty(n(33)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=!n(32)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var a=n(29),r=n(19).document,i=a(r)&&a(r.createElement);e.exports=function(e){return i?r.createElement(e):{}}},function(e,t,n){var a=n(29);e.exports=function(e,t){if(!a(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!a(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!a(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!a(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){e.exports={"default":n(37),__esModule:!0}},function(e,t,n){n(38);var a=n(23).Object;e.exports=function(e,t){return a.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var a=n(39),r=n(42).f;n(21)("getOwnPropertyDescriptor",function(){return function(e,t){return r(a(e),t)}})},function(e,t,n){var a=n(40),r=n(14);e.exports=function(e){return a(r(e))}},function(e,t,n){var a=n(41);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==a(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var a=n(43),r=n(35),i=n(39),o=n(34),s=n(16),c=n(30),u=Object.getOwnPropertyDescriptor;t.f=n(31)?u:function(e,t){if(e=i(e),t=o(t,!0),c)try{return u(e,t)}catch(n){}return s(e,t)?r(!a.f.call(e,t),e[t]):void 0}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(45),i=a(r),o=n(49),s=a(o),c=n(62),u=a(c);t["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,u["default"])(t)));e.prototype=(0,s["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i["default"]?(0,i["default"])(e,t):e.__proto__=t)}},function(e,t,n){e.exports={"default":n(46),__esModule:!0}},function(e,t,n){n(47),e.exports=n(23).Object.setPrototypeOf},function(e,t,n){var a=n(22);a(a.S,"Object",{setPrototypeOf:n(48).set})},function(e,t,n){var a=n(29),r=n(28),i=function(e,t){if(r(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{a=n(24)(Function.call,n(42).f(Object.prototype,"__proto__").set,2),a(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:a(e,n),e}}({},!1):void 0),check:i}},function(e,t,n){e.exports={"default":n(50),__esModule:!0}},function(e,t,n){n(51);var a=n(23).Object;e.exports=function(e,t){return a.create(e,t)}},function(e,t,n){var a=n(22);a(a.S,"Object",{create:n(52)})},function(e,t,n){var a=n(28),r=n(53),i=n(60),o=n(17)("IE_PROTO"),s=function(){},c="prototype",u=function(){var e,t=n(33)("iframe"),a=i.length,r=">";for(t.style.display="none",n(61).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script"+r),e.close(),u=e.F;a--;)delete u[c][i[a]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[c]=a(e),n=new s,s[c]=null,n[o]=e):n=u(),void 0===t?n:r(n,t)}},function(e,t,n){var a=n(27),r=n(28),i=n(54);e.exports=n(31)?Object.defineProperties:function(e,t){r(e);for(var n,o=i(t),s=o.length,c=0;s>c;)a.f(e,n=o[c++],t[n]);return e}},function(e,t,n){var a=n(55),r=n(60);e.exports=Object.keys||function(e){return a(e,r)}},function(e,t,n){var a=n(16),r=n(39),i=n(56)(!1),o=n(17)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),c=0,u=[];for(n in s)n!=o&&a(s,n)&&u.push(n);for(;t.length>c;)a(s,n=t[c++])&&(~i(u,n)||u.push(n));return u}},function(e,t,n){var a=n(39),r=n(57),i=n(59);e.exports=function(e){return function(t,n,o){var s,c=a(t),u=r(c.length),l=i(o,u);if(e&&n!=n){for(;u>l;)if(s=c[l++],s!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l;return!e&&-1}}},function(e,t,n){var a=n(58),r=Math.min;e.exports=function(e){return e>0?r(a(e),9007199254740991):0}},function(e,t){var n=Math.ceil,a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?a:n)(e)}},function(e,t,n){var a=n(58),r=Math.max,i=Math.min;e.exports=function(e,t){return e=a(e),0>e?r(e+t,0):i(e,t)}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){e.exports=n(19).document&&document.documentElement},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(63),i=a(r),o=n(78),s=a(o),c="function"==typeof s["default"]&&"symbol"==typeof i["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof s["default"]&&e.constructor===s["default"]?"symbol":typeof e};t["default"]="function"==typeof s["default"]&&"symbol"===c(i["default"])?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof s["default"]&&e.constructor===s["default"]?"symbol":void 0===e?"undefined":c(e)}},function(e,t,n){e.exports={"default":n(64),__esModule:!0}},function(e,t,n){n(65),n(74),e.exports=n(73)("iterator")},function(e,t,n){"use strict";var a=n(66)(!0);n(67)(String,"String",function(e){this._t=e+"",this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=a(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var a=n(58),r=n(14);e.exports=function(e){return function(t,n){var i,o,s=r(t)+"",c=a(n),u=s.length;return 0>c||c>=u?e?"":void 0:(i=s.charCodeAt(c),55296>i||i>56319||c+1===u||(o=s.charCodeAt(c+1))<56320||o>57343?e?s.charAt(c):i:e?s.slice(c,c+2):(i-55296<<10)+(o-56320)+65536)}}},function(e,t,n){"use strict";var a=n(68),r=n(22),i=n(69),o=n(26),s=n(16),c=n(70),u=n(71),l=n(72),d=n(15),f=n(73)("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",b="keys",g="values",m=function(){return this};e.exports=function(e,t,n,v,y,_,w){u(n,t,v);var k,P,S,O=function(e){if(!h&&e in T)return T[e];switch(e){case b:return function(){return new n(this,e)};case g:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",A=y==g,x=!1,T=e.prototype,R=T[f]||T[p]||y&&T[y],j=R||O(y),I=y?A?O("entries"):j:void 0,N="Array"==t?T.entries||R:R;if(N&&(S=d(N.call(new e)),S!==Object.prototype&&(l(S,E,!0),a||s(S,f)||o(S,f,m))),A&&R&&R.name!==g&&(x=!0,j=function(){return R.call(this)}),a&&!w||!h&&!x&&T[f]||o(T,f,j),c[t]=j,c[E]=m,y)if(k={values:A?j:O(g),keys:_?j:O(b),entries:I},w)for(P in k)P in T||i(T,P,k[P]);else r(r.P+r.F*(h||x),t,k);return k}},function(e,t){e.exports=!0},function(e,t,n){e.exports=n(26)},function(e,t){e.exports={}},function(e,t,n){"use strict";var a=n(52),r=n(35),i=n(72),o={};n(26)(o,n(73)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=a(o,{next:r(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var a=n(27).f,r=n(16),i=n(73)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,i)&&a(e,i,{configurable:!0,value:t})}},function(e,t,n){var a=n(18)("wks"),r=n(20),i=n(19).Symbol,o="function"==typeof i;e.exports=function(e){return a[e]||(a[e]=o&&i[e]||(o?i:r)("Symbol."+e))}},function(e,t,n){n(75);for(var a=n(19),r=n(26),i=n(70),o=n(73)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;5>c;c++){var u=s[c],l=a[u],d=l&&l.prototype;d&&!d[o]&&r(d,o,u),i[u]=i.Array}},function(e,t,n){"use strict";var a=n(76),r=n(77),i=n(70),o=n(39);e.exports=n(67)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),i.Arguments=i.Array,a("keys"),a("values"),a("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={"default":n(79),__esModule:!0}},function(e,t,n){n(80),n(88),e.exports=n(23).Symbol},function(e,t,n){"use strict";var a=n(19),r=n(23),i=n(16),o=n(31),s=n(22),c=n(69),u=n(81).KEY,l=n(32),d=n(18),f=n(72),h=n(20),p=n(73),b=n(82),g=n(83),m=n(85),v=n(28),y=n(39),_=n(34),w=n(35),k=n(52),P=n(86),S=n(42),O=n(27),E=S.f,A=O.f,x=P.f,T=a.Symbol,R=a.JSON,j=R&&R.stringify,I=!1,N=p("_hidden"),C={}.propertyIsEnumerable,F=d("symbol-registry"),U=d("symbols"),M=Object.prototype,D="function"==typeof T,L=o&&l(function(){return 7!=k(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(e,t,n){var a=E(M,t);a&&delete M[t],A(e,t,n),a&&e!==M&&A(M,t,a)}:A,H=function(e){var t=U[e]=k(T.prototype);return t._k=e,o&&I&&L(M,e,{configurable:!0,set:function(t){i(this,N)&&i(this[N],e)&&(this[N][e]=!1),L(this,e,w(1,t))}}),t},B=function(e){return"symbol"==typeof e},G=function(e,t,n){return v(e),t=_(t,!0),v(n),i(U,t)?(n.enumerable?(i(e,N)&&e[N][t]&&(e[N][t]=!1),n=k(n,{enumerable:w(0,!1)})):(i(e,N)||A(e,N,w(1,{})),e[N][t]=!0),L(e,t,n)):A(e,t,n)},q=function(e,t){v(e);for(var n,a=g(t=y(t)),r=0,i=a.length;i>r;)G(e,n=a[r++],t[n]);return e},J=function(e,t){return void 0===t?k(e):q(k(e),t)},z=function(e){var t=C.call(this,e=_(e,!0));return t||!i(this,e)||!i(U,e)||i(this,N)&&this[N][e]?t:!0},V=function(e,t){var n=E(e=y(e),t=_(t,!0));return!n||!i(U,t)||i(e,N)&&e[N][t]||(n.enumerable=!0),n},W=function(e){for(var t,n=x(y(e)),a=[],r=0;n.length>r;)i(U,t=n[r++])||t==N||t==u||a.push(t);return a},Q=function(e){for(var t,n=x(y(e)),a=[],r=0;n.length>r;)i(U,t=n[r++])&&a.push(U[t]);return a},K=function(e){if(void 0!==e&&!B(e)){for(var t,n,a=[e],r=1;arguments.length>r;)a.push(arguments[r++]);return t=a[1],"function"==typeof t&&(n=t),!n&&m(t)||(t=function(e,t){return n&&(t=n.call(this,e,t)),B(t)?void 0:t}),a[1]=t,j.apply(R,a)}},Y=l(function(){var e=T();return"[null]"!=j([e])||"{}"!=j({a:e})||"{}"!=j(Object(e))});D||(T=function(){if(B(this))throw TypeError("Symbol is not a constructor");return H(h(arguments.length>0?arguments[0]:void 0))},c(T.prototype,"toString",function(){return this._k}),B=function(e){return e instanceof T},S.f=V,O.f=G,n(87).f=P.f=W,n(43).f=z,n(84).f=Q,o&&!n(68)&&c(M,"propertyIsEnumerable",z,!0)),s(s.G+s.W+s.F*!D,{Symbol:T});for(var X="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Z=0;X.length>Z;){var $=X[Z++],ee=r.Symbol,te=p($);$ in ee||A(ee,$,{value:D?te:H(te)})}I=!0,s(s.S+s.F*!D,"Symbol",{"for":function(e){return i(F,e+="")?F[e]:F[e]=T(e)},keyFor:function(e){return b(F,e)},useSetter:function(){I=!0},useSimple:function(){I=!1}}),s(s.S+s.F*!D,"Object",{create:J,defineProperty:G,defineProperties:q,getOwnPropertyDescriptor:V,getOwnPropertyNames:W,getOwnPropertySymbols:Q}),R&&s(s.S+s.F*(!D||Y),"JSON",{stringify:K}),f(T,"Symbol"),f(Math,"Math",!0),f(a.JSON,"JSON",!0)},function(e,t,n){var a=n(20)("meta"),r=n(29),i=n(16),o=n(27).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(32)(function(){return c(Object.preventExtensions({}))}),l=function(e){o(e,a,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,a)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[a].i},f=function(e,t){if(!i(e,a)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[a].w},h=function(e){return u&&p.NEED&&c(e)&&!i(e,a)&&l(e),e},p=e.exports={KEY:a,NEED:!1,fastKey:d,getWeak:f,onFreeze:h}},function(e,t,n){var a=n(54),r=n(39);e.exports=function(e,t){for(var n,i=r(e),o=a(i),s=o.length,c=0;s>c;)if(i[n=o[c++]]===t)return n}},function(e,t,n){var a=n(54),r=n(84),i=n(43);e.exports=function(e){var t=a(e),n=r.f;if(n)for(var o,s=n(e),c=i.f,u=0;s.length>u;)c.call(e,o=s[u++])&&t.push(o);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var a=n(41);e.exports=Array.isArray||function(e){return"Array"==a(e)}},function(e,t,n){var a=n(39),r=n(87).f,i={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return r.f(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==i.call(e)?s(e):r(a(e))}},function(e,t,n){var a=n(55),r=n(60).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,r)}},function(e,t){},function(e,t,n){e.exports=n(90)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(91),i=a(r);t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,i["default"])(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()},function(e,t,n){e.exports={"default":n(92),__esModule:!0}},function(e,t,n){n(93);var a=n(23).Object;e.exports=function(e,t,n){return a.defineProperty(e,t,n)}},function(e,t,n){var a=n(22);a(a.S+a.F*!n(31),"Object",{defineProperty:n(27).f})},function(e,t,n){e.exports=n(95)},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){e.exports={"default":n(97),__esModule:!0}},function(e,t,n){n(88),n(65),n(74),n(98),e.exports=n(23).Promise},function(e,t,n){"use strict";var a,r,i,o=n(68),s=n(19),c=n(24),u=n(99),l=n(22),d=n(29),f=(n(28),n(25)),h=n(100),p=n(101),b=(n(48).set,n(105)),g=n(106).set,m=n(108),v="Promise",y=s.TypeError,_=s.process,w=s[v],k="process"==u(_),P=function(){},S=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[n(73)("species")]=function(e){e(P,P)};return(k||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t}catch(a){}}(),O=function(e,t){return e===t||e===w&&t===i},E=function(e){var t;return d(e)&&"function"==typeof(t=e.then)?t:!1},A=function(e){return O(w,e)?new x(e):new r(e)},x=r=function(e){var t,n;this.promise=new e(function(e,a){if(void 0!==t||void 0!==n)throw y("Bad Promise constructor");t=e,n=a}),this.resolve=f(t),this.reject=f(n)},T=function(e){try{e()}catch(t){return{error:t}}},R=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var a=e._v,r=1==e._s,i=0,o=function(t){var n,i,o=r?t.ok:t.fail,s=t.resolve,c=t.reject;try{o?(r||(2==e._h&&N(e),e._h=1),n=o===!0?a:o(a),n===t.promise?c(y("Promise-chain cycle")):(i=E(n))?i.call(n,s,c):s(n)):c(a)}catch(u){c(u)}};n.length>i;)o(n[i++]);e._c=[],e._n=!1,t&&!e._h&&j(e)})}},j=function(e){g.call(s,function(){var t,n,a,r=e._v;if(I(e)&&(t=T(function(){k?_.emit("unhandledRejection",r,e):(n=s.onunhandledrejection)?n({promise:e,reason:r}):(a=s.console)&&a.error&&a.error("Unhandled promise rejection",r)}),e._h=k||I(e)?2:1),e._a=void 0,t)throw t.error})},I=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,a=0;n.length>a;)if(t=n[a++],t.fail||!I(t.promise))return!1;return!0},N=function(e){g.call(s,function(){var t;k?_.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},C=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),R(t,!0))},F=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw y("Promise can't be resolved itself");(t=E(e))?m(function(){var a={_w:n,_d:!1};try{t.call(e,c(F,a,1),c(C,a,1))}catch(r){C.call(a,r)}}):(n._v=e,n._s=1,R(n,!1))}catch(a){C.call({_w:n,_d:!1},a)}}};S||(w=function(e){h(this,w,v,"_h"),f(e),a.call(this);try{e(c(F,this,1),c(C,this,1))}catch(t){C.call(this,t)}},a=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},a.prototype=n(109)(w.prototype,{then:function(e,t){var n=A(b(this,w));return n.ok="function"==typeof e?e:!0,n.fail="function"==typeof t&&t,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),x=function(){var e=new a;this.promise=e,this.resolve=c(F,e,1),this.reject=c(C,e,1)}),l(l.G+l.W+l.F*!S,{Promise:w}),n(72)(w,v),n(110)(v),i=n(23)[v],l(l.S+l.F*!S,v,{reject:function(e){var t=A(this),n=t.reject;return n(e),t.promise}}),l(l.S+l.F*(o||!S),v,{resolve:function(e){if(e instanceof w&&O(e.constructor,this))return e;var t=A(this),n=t.resolve;return n(e),t.promise}}),l(l.S+l.F*!(S&&n(111)(function(e){w.all(e)["catch"](P)})),v,{all:function(e){var t=this,n=A(t),a=n.resolve,r=n.reject,i=T(function(){var n=[],i=0,o=1;p(e,!1,function(e){var s=i++,c=!1;n.push(void 0),o++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--o||a(n))},r)}),--o||a(n)});return i&&r(i.error),n.promise},race:function(e){var t=this,n=A(t),a=n.reject,r=T(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,a)})});return r&&a(r.error),n.promise}})},function(e,t,n){var a=n(41),r=n(73)("toStringTag"),i="Arguments"==a(function(){return arguments}());e.exports=function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=(t=Object(e))[r])?n:i?a(t):"Object"==(o=a(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t){e.exports=function(e,t,n,a){if(!(e instanceof t)||void 0!==a&&a in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var a=n(24),r=n(102),i=n(103),o=n(28),s=n(57),c=n(104);e.exports=function(e,t,n,u,l){var d,f,h,p=l?function(){return e}:c(e),b=a(n,u,t?2:1),g=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(i(p))for(d=s(e.length);d>g;g++)t?b(o(f=e[g])[0],f[1]):b(e[g]);else for(h=p.call(e);!(f=h.next()).done;)r(h,b,f.value,t)}},function(e,t,n){var a=n(28);e.exports=function(e,t,n,r){try{return r?t(a(n)[0],n[1]):t(n)}catch(i){var o=e["return"];throw void 0!==o&&a(o.call(e)),i}}},function(e,t,n){var a=n(70),r=n(73)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||i[r]===e)}},function(e,t,n){var a=n(99),r=n(73)("iterator"),i=n(70);e.exports=n(23).getIteratorMethod=function(e){return void 0!=e?e[r]||e["@@iterator"]||i[a(e)]:void 0}},function(e,t,n){var a=n(28),r=n(25),i=n(73)("species");e.exports=function(e,t){var n,o=a(e).constructor;return void 0===o||void 0==(n=a(o)[i])?t:r(n)}},function(e,t,n){var a,r,i,o=n(24),s=n(107),c=n(61),u=n(33),l=n(19),d=l.process,f=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,b=0,g={},m="onreadystatechange",v=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},y=function(e){v.call(e.data)};f&&h||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++b]=function(){s("function"==typeof e?e:Function(e),t)},a(b),b},h=function(e){delete g[e]},"process"==n(41)(d)?a=function(e){d.nextTick(o(v,e,1))}:p?(r=new p,i=r.port2,r.port1.onmessage=y,a=o(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(a=function(e){l.postMessage(e+"","*")},l.addEventListener("message",y,!1)):a=m in u("script")?function(e){c.appendChild(u("script"))[m]=function(){c.removeChild(this),v.call(e)}}:function(e){setTimeout(o(v,e,1),0)}),e.exports={set:f,clear:h}},function(e,t){e.exports=function(e,t,n){var a=void 0===n;switch(t.length){case 0:return a?e():e.call(n);case 1:return a?e(t[0]):e.call(n,t[0]);case 2:return a?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var a,r,i,o=n(19),s=n(106).set,c=o.MutationObserver||o.WebKitMutationObserver,u=o.process,l=o.Promise,d="process"==n(41)(u),f=function(){var e,t,n;for(d&&(e=u.domain)&&(u.domain=null,e.exit());a;)t=a.domain,n=a.fn,t&&t.enter(),n(),t&&t.exit(),a=a.next;r=void 0,e&&e.enter()};if(d)i=function(){u.nextTick(f)};else if(c){var h=1,p=document.createTextNode("");new c(f).observe(p,{characterData:!0}),i=function(){p.data=h=-h}}else i=l&&l.resolve?function(){l.resolve().then(f)}:function(){s.call(o,f)};e.exports=function(e){var t={fn:e,next:void 0,domain:d&&u.domain};r&&(r.next=t),a||(a=t,i()),r=t}},function(e,t,n){var a=n(26);e.exports=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:a(e,r,t[r]);return e}},function(e,t,n){"use strict";var a=n(19),r=n(23),i=n(27),o=n(31),s=n(73)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:a[e];o&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var a=n(73)("iterator"),r=!1;try{var i=[7][a]();i["return"]=function(){r=!0},Array.from(i,function(){throw 2})}catch(o){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var i=[7],o=i[a]();o.next=function(){n=!0},i[a]=function(){return o},e(i)}catch(s){}return n}},function(e,t,n){"use strict";var a=n(89)["default"],r=n(94)["default"],i=n(96)["default"];Object.defineProperty(t,"__esModule",{value:!0}),n(113);var o="27F4B4CC-CEF6-F408-FF94-325C139E6400",s="1BCABB13-3115-2646-FF05-441A80AB8F00",c="v1",u="default",l=null,d=function(){function e(){return r(this,e),l?l:(Backendless.initApp(o,s,c),void(l=this))}return a(e,[{key:"login",value:function(e){var t=e.email,n=void 0===t?"":t,a=e.password,r=void 0===a?"":a;return new i(function(e,t){if(""===n||""===r)throw Error("email or password not defined");Backendless.UserService.login(n,r,!0,new Backendless.Async(function(t){return e(t)},function(){return t()}))})}},{key:"registration",value:function(e){var t=e.name,n=void 0===t?"":t,a=e.email,r=void 0===a?"":a,o=e.password,s=void 0===o?"":o;return new i(function(e,t){var a=new Backendless.User;a.name=n,a.email=r,a.password=s,Backendless.UserService.register(a,new Backendless.Async(function(t){return e(t)},function(){return t()}))})}},{key:"getUsers",value:function(){try{var e=Backendless.Persistence.of(Users).find();return e}catch(t){}}},{key:"subscribeBass",value:function(e,t){var n=new SubscriptionOptions({subtopic:e});Backendless.Messaging.subscribe(u,t,n)}},{key:"publishBass",value:function(e,t,n){var a=new PublishOptions;a.publisherId=e,a.subtopic=t,Backendless.Messaging.publish(u,JSON.stringify(n),a)}}]),e}();t["default"]=d,e.exports=t["default"]},function(e,t,n){n(114)(n(115))},function(e,t){e.exports=function(e){"function"==typeof execScript?execScript(e):eval.call(null,e)}},function(e,t){e.exports='(function(){function m(){return"undefined"!==typeof window}function t(a,b){void 0!==a.nextPage&&(a.nextPage&&a.nextPage.split("/")[1]==e.appVersion&&(a.nextPage=e.serverURL+a.nextPage),a._nextPage=a.nextPage,a.nextPage=function(a){return b._load(this._nextPage,a)},a.getPage=function(a,d,f){var g=this._nextPage.replace(/offset=\\d+/ig,"offset="+a);d instanceof p?f=d:g=g.replace(/pagesize=\\d+/ig,"pageSize="+d);f=l(arguments);return b._load(g,f)},a.dataMapper=b)}function p(a,b,c){b instanceof Function||\n(c=b,b=w);this.success=function(b){a&&a.call(c,b)};this.fault=function(a){b&&b.call(c,a)}}function u(){this.properties=[];this.url=this.options=this.condition=null}function z(a){this.model=h.isString(a)?function(){}:a;this.className=A.call(a);"string"===(typeof a).toLowerCase()&&(this.className=a);if(!this.className)throw"Class name should be specified";this.restUrl=e.appPath+"/data/"+this.className}function J(){this.restUrl=e.appPath+"/data";this.getRestUrl=function(a,b){return this.restUrl+"/"+\nencodeURIComponent(a.___class)+"/permissions/"+encodeURIComponent(b)+"/"+encodeURIComponent(a.objectId)};this.sendRequest=function(a,b,c,d,f,g){var n=l(arguments),k=null!=n,h={permission:d};if(!c.___class||!c.objectId)throw Error(\'"dataObject.___class" and "dataObject.objectId" need to be specified\');a?h.user=a:b&&(h.role=b);return e._ajax({method:"PUT",url:this.getRestUrl(c,f),data:JSON.stringify(h),isAsync:k,asyncHandler:n})}}function K(){}function L(){this.restUrl=e.appPath+"/geo";this.monitoringId=\nnull}function D(){}function E(a){this.eventHandlers={};this.restUrl=a;this.timeout=this.timer=0;this.interval=1E3;this.xhr=null;this.needReconnect=!0;this.responder=new p(this.onMessage,this.onError,this);this.poll()}function F(a){var b=this;this.reconnectWithPolling=!0;try{var c=this.socket=new M(a);c.onopen=function(){return b.sockOpen()};c.onerror=function(a){return b.sockError(a)};c.onclose=function(a){b.onSocketClose()};c.onmessage=function(a){return b.onMessage(a)}}catch(d){setTimeout(function(){b.onSocketClose()},\n100)}}function G(a){this.channelName=a.channelName;this.options=a.options;this.channelProperties=a.channelProperties;this.subscriptionId=null;this.restUrl=a.restUrl+"/"+a.channelName;this.responder=a.responder||w;this._subscribe(a.onSubscribe)}function N(){this.restUrl=e.appPath+"/messaging";this.channelProperties={}}function O(a,b,c){var d;d="--"+c;d+="\\r\\n";d+=\'Content-Disposition: form-data; name="file"\';d+=\'; filename="\'+a+\'"\';d+="\\r\\n";d+="Content-Type: application/octet-stream";d+="\\r\\n";d+=\n"\\r\\n";d+=b;d+="\\r\\n";d+="--";d+=c;d+="--";return d+="\\r\\n"}function $(a){var b=new XMLHttpRequest,c="-backendless-multipart-form-boundary-"+(new Date).getTime();a=O(this.fileName,a.target.result,c);b.open("POST",this.uploadPath,!0);b.setRequestHeader("content-type","multipart/form-data; boundary="+c);b.setRequestHeader("application-id",e.applicationId);b.setRequestHeader("secret-key",e.secretKey);b.setRequestHeader("application-type","JS");null!=q&&q["user-token"]?b.setRequestHeader("user-token",\nq["user-token"]):e.LocalCache.exists("user-token")&&b.setRequestHeader("user-token",e.LocalCache.get("user-token"));null!==x&&b.setRequestHeader("uiState",x);var d=this.asyncHandler;d&&(b.onreadystatechange=function(){4==b.readyState&&(200<=b.status&&300>b.status?d.success(JSON.parse(b.responseText)):d.fault(JSON.parse(b.responseText)))});b.sendAsBinary(a);if(d)return b;if(200<=b.status&&300>b.status)return b.responseText?JSON.parse(b.responseText):!0;throw function(a){var b={};try{b=JSON.parse(a.responseText)}catch(c){b.message=\na.responseText}b.statusCode=a.status;return b}(b);}function aa(a){var b=new XMLHttpRequest,c="-backendless-multipart-form-boundary-"+(new Date).getTime();O(this.fileName,a.target.result,c);b.open("PUT",this.uploadPath,!0);b.setRequestHeader("Content-Type","text/plain");b.setRequestHeader("application-id",e.applicationId);b.setRequestHeader("secret-key",e.secretKey);b.setRequestHeader("application-type","JS");null!==x&&b.setRequestHeader("uiState",x);var d=this.asyncHandler;d&&(b.onreadystatechange=\nfunction(){4==b.readyState&&(200<=b.status&&300>b.status?d.success(JSON.parse(b.responseText)):d.fault(JSON.parse(b.responseText)))});b.send(a.target.result.split(",")[1]);if(d)return b;if(200<=b.status&&300>b.status)return b.responseText?JSON.parse(b.responseText):!0;throw function(a){var b={};try{b=JSON.parse(a.responseText)}catch(c){b.message=a.responseText}b.statusCode=a.status;return b}(b);}function P(){this.restUrl=e.appPath+"/files/permissions"}function Q(){this.restUrl=e.appPath+"/files"}\nfunction B(){this.restUrl=e.appPath+"/commerce/googleplay"}function H(){this.restUrl=e.appPath+"/servercode/events"}function R(a){this.name=a}function y(a,b,c,d){var f={};f.message=c;f.timestamp=Date.now();f.exception=d?d:null;f.logger=a;f["log-level"]=b;e.Logging.logInfo.push(f);e.Logging.messagesCount++;e.Logging.checkMessagesLen()}function S(){}NodeDevice={name:"NODEJS",platform:"NODEJS",uuid:"someId",version:"1"};m()||(encodeURIComponent=function(a){return escape(a)});var e=this.Backendless||\n{},w=function(){};this.Backendless=e;Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError(\'"this" is null or not defined\');var d=Object(this),f=d.length>>>0;if(0===f)return-1;c=+b||0;Infinity===Math.abs(c)&&(c=0);if(c>=f)return-1;for(c=Math.max(0<=c?c:f-Math.abs(c),0);c<f;){if(c in d&&d[c]===a)return c;c++}return-1});var ba=Object.prototype.hasOwnProperty,T=Array.prototype.forEach,ca=Array.isArray,M=null;e.VERSION="0.2";e.serverURL="https://api.backendless.com";\n(function(){try{"undefined"==typeof XMLHttpRequest.prototype.sendAsBinary&&(XMLHttpRequest.prototype.sendAsBinary=function(a){for(var c=new ArrayBuffer(a.length),c=new Uint8Array(c,0),d=0;d<a.length;d++)c[d]=a.charCodeAt(d)&255;this.send(c)})}catch(a){}})();var da=function(){var a=m()?navigator.userAgent.toLowerCase():"NodeJS",b=/(chrome)[ \\/]([\\w.]+)/.exec(a)||/(webkit)[ \\/]([\\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(a)||/(msie) ([\\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(a)||\n[],a=b[1]||"",b=b[2]||"0",c={};a&&(c[a]=!0,c.version=b);return c}(),x=null;e.browser=da;var h=e.Utils={isObject:function(a){return a===Object(a)},isString:function(a){return"String"===Object.prototype.toString.call(a).slice(8,-1)},isNumber:function(a){return"Number"===Object.prototype.toString.call(a).slice(8,-1)},isFunction:function(a){return"Function"===Object.prototype.toString.call(a).slice(8,-1)},isBoolean:function(a){return"Boolean"===Object.prototype.toString.call(a).slice(8,-1)},isDate:function(a){return"Date"===\nObject.prototype.toString.call(a).slice(8,-1)}};h.isArray=ca||function(a){return"Array"===Object.prototype.toString.call(a).slice(8,-1)};h.addEvent=function(a,b,c){b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent?b.attachEvent("on"+a,c):b[a]=c};h.isEmpty=function(a){if(null==a)return!0;if(h.isArray(a)||h.isString(a))return 0===a.length;for(var b in a)if(a.hasOwnProperty(b)&&void 0!==a[b]&&null!==a[b])return!1;return!0};h.removeEvent=function(a,b){b.removeEventListener?b.removeEventListener(a,\nnull,!1):b.detachEvent?b.detachEvent("on"+a,null):b[a]=null};h.forEach=function(a,b,c){if(a)if(T&&a.forEach===T)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,f=a.length;d<f&&!(d in a&&b.call(c,a[d],d,a)===breaker);d++);else for(d in a)if(ba.call(a,d)&&b.call(c,a[d],d,a)===breaker)break};e.setUIState=function(a){if(void 0===a)throw Error("UI state name must be defined or explicitly set to null");x=null===a?null:a};e._ajax_for_browser=function(a){var b=["cacheOnly","remoteDataOnly","fromCacheOrRemote",\n"fromRemoteOrCache","fromCacheAndRemote"],c={ignoreCache:function(a){return d(a)},cacheOnly:function(a){var b=e.LocalCache.get(a.url.replace(/([^A-Za-z0-9])/g,"")),c={message:"error: cannot find data in Backendless.LocalCache",statusCode:404};if(b)return a.isAsync&&a.asyncHandler.success(b),b;if(a.isAsync)a.asyncHandler.fault(c);else throw c;},remoteDataOnly:function(a){return d(a)},fromCacheOrRemote:function(a){var b=e.LocalCache.get(a.url.replace(/([^A-Za-z0-9])/g,""));return b?(a.isAsync&&a.asyncHandler.success(b),\nb):d(a)},fromRemoteOrCache:function(a){return d(a)},fromCacheAndRemote:function(a){var b={},c=e.LocalCache.get(a.url.replace(/([^A-Za-z0-9])/g,"")),f={message:"error: cannot find data in Backendless.LocalCache",statusCode:404};b.remote=d(a);if(c)a.isAsync&&a.asyncHandler.success(c),b.local=c;else if(a.isAsync)a.asyncHandler.fault(f);else throw f;return b}},d=function(a){var b=new XMLHttpRequest,c=a.data?"application/json":"application/x-www-form-urlencoded",d,f=function(a){var b=!0;if(a.responseText)try{b=\nJSON.parse(a.responseText)}catch(c){b=a.responseText}return b},l=function(a){var b={};try{b=JSON.parse(a.responseText)}catch(c){b.message=a.responseText}b.statusCode=a.status;b.message=b.message||"unknown error occurred";return b},m=function(b){b=h.isArray(b)?b.slice():r({},b);"GET"==a.method&&a.cacheActive?(b.cachePolicy=a.cachePolicy,e.LocalCache.set(a.urlBlueprint,b)):e.LocalCache.exists(a.urlBlueprint)&&(!0===b||"DELETE"==a.method?b=void 0:b.cachePolicy=e.LocalCache.getCachePolicy(a.urlBlueprint),\n"___class"in b&&delete b.___class,e.LocalCache.set(a.urlBlueprint,b))},p=function(){return a.cacheActive&&"fromRemoteOrCache"==a.cachePolicy.policy&&e.LocalCache.exists(a.urlBlueprint)};b.open(a.method,a.url,a.isAsync);b.setRequestHeader("Content-Type",c);b.setRequestHeader("application-id",e.applicationId);b.setRequestHeader("secret-key",e.secretKey);b.setRequestHeader("application-type","JS");null!=q&&q["user-token"]?b.setRequestHeader("user-token",q["user-token"]):e.LocalCache.exists("user-token")&&\nb.setRequestHeader("user-token",e.LocalCache.get("user-token"));null!==x&&b.setRequestHeader("uiState",x);a.isAsync&&(b.onreadystatechange=function(){4==b.readyState&&(200<=b.status&&300>b.status?(d=f(b),m(d),a.asyncHandler.success&&a.asyncHandler.success(d)):p()?a.asyncHandler.success&&a.asyncHandler.success(e.LocalCache.get(a.urlBlueprint)):a.asyncHandler.fault&&a.asyncHandler.fault(l(b)))});b.send(a.data);if(a.isAsync)return b;if(200<=b.status&&300>b.status)return d=f(b),m(d),d;if(p())return e.LocalCache.get(a.urlBlueprint);\nthrow l(b);};a.method=a.method||"GET";a.cachePolicy=a.cachePolicy||{policy:"ignoreCache"};a.isAsync="boolean"==typeof a.isAsync?a.isAsync:!1;a.cacheActive="GET"==a.method&&-1!=b.indexOf(a.cachePolicy.policy);a.urlBlueprint=a.url.replace(/([^A-Za-z0-9])/g,"");try{return c[a.cachePolicy.policy].call(this,a)}catch(f){throw console.log("error: "+f.message),f;}};e._ajax_for_nodejs=function(a){a.data=a.data||"";"string"!==typeof a.data&&(a.data=JSON.stringify(a.data));a.asyncHandler=a.asyncHandler||{};\na.isAsync="boolean"==typeof a.isAsync?a.isAsync:!1;var b=a.url.substr(0,a.url.indexOf("/",8)).substr(0,a.url.indexOf(":")),c=a.url.substr(0,a.url.indexOf("/",8)).substr(a.url.indexOf("/")+2),d=c.substr(0,-1==c.indexOf(":")?c.length:c.indexOf(":")),c=-1!=c.indexOf(":")?parseInt(c.substr(c.indexOf(":")+1)):"http"==b?80:443,d={host:d,port:c,method:a.method||"GET",path:a.url.substr(a.url.indexOf("/",8)),headers:{"Content-Length":a.data?Buffer.byteLength(a.data):0,"Content-Type":a.data?"application/json":\n"application/x-www-form-urlencoded","application-id":e.applicationId,"secret-key":e.secretKey,"application-type":"JS"}},f="";null!=q&&q["user-token"]&&(d.headers["user-token"]=q["user-token"]);if(a.isAsync)b=require(b).request(d,function(b){b.setEncoding("utf8");b.on("data",function(a){f+=a});b.on("end",function(){var c=a.asyncHandler[200<=b.statusCode&&300>b.statusCode?"success":"fault"];h.isFunction(c)&&c(f)})});else throw Error("Use Async type of request using Backendless with NodeJS. Add Backendless.Async(successCallback, errorCallback) as last argument");\nb.on("error",function(b){a.asyncHandler.fault||(a.asyncHandler.fault=function(){});a.asyncHandler.fault(b)});b.write(a.data,"utf8");return b.end()};e._ajax=m()?e._ajax_for_browser:e._ajax_for_nodejs;var A=function(){if(this.prototype&&this.prototype.___class)return this.prototype.___class;var a=(h.isFunction(this)?this.toString():this.constructor.toString()).match(/function\\s+(\\w+)/);return a&&1<a.length?a[1]:""},C=function(a){var b=[],c,d;c=0;for(d=a.length;c<d;++c)b.push(encodeURIComponent(a[c]));\nreturn b.join(",")},U=function(a){var b=function(a){var b=null,c=null,e;for(e in a)if(a.hasOwnProperty(e)&&"___class"===e){b=a[e];break}if(b)try{c=eval(b),a=r(new c,a)}catch(k){}return a};if(h.isObject(a)&&null!=a)if(h.isArray(a))for(var c=a.length;c--;)a[c]=b(a[c]);else a=b(a);return a},r=function(a,b){for(var c in b)void 0!==b[c]&&b.hasOwnProperty(c)&&(a[c]=a[c]||{},a[c]=U(b[c]),a[c]&&(a[c].hasOwnProperty(c)&&a[c][c]&&a[c][c].hasOwnProperty("__originSubID"))&&(a[c][c]=U(a[c])));return a},l=function(a){var b,\nc;b=0;for(c=a.length;b<c;++b)if(a[b]instanceof p)return a[b];return null};e.LocalCache=function(){var a={},b;a.enabled=!1;a.exists=function(a){};a.set=function(a,b){};a.get=function(a){};a.remove=function(a){};a.clear=function(){};a.flushExpired=function(){};a.getCachePolicy=function(a){};a.getAll=function(){};a.serialize=function(a){return JSON.stringify(a)};a.deserialize=function(a){if("string"==typeof a)try{return JSON.parse(a)}catch(b){return a||void 0}};if(function(){try{return m()&&"localStorage"in\nwindow&&window.localStorage?(localStorage.setItem("localStorageTest",!0),localStorage.removeItem("localStorageTest"),!0):!1}catch(a){return!1}}()){b=window.localStorage;var c=function(){"Backendless"in b||b.setItem("Backendless",a.serialize({}))},d=function(a){var b=!1;"Object"==Object.prototype.toString.call(a).slice(8,-1)&&"cachePolicy"in a&&("timeToLive"in a.cachePolicy&&-1!=a.cachePolicy.timeToLive&&"created"in a.cachePolicy)&&(b=(new Date).getTime()-a.cachePolicy.created>a.cachePolicy.timeToLive);\nreturn b};c();a.enabled=!0;a.exists=function(b){return void 0!==a.get(b)};a.set=function(d,e){if(void 0===e)return a.remove(d);c();var n=a.deserialize(b.getItem("Backendless"));"Object"==Object.prototype.toString.call(e).slice(8,-1)&&"cachePolicy"in e&&"timeToLive"in e.cachePolicy&&(e.cachePolicy.created=(new Date).getTime());n[d]=e;try{b.setItem("Backendless",a.serialize(n))}catch(k){n={},n[d]=e,b.setItem("Backendless",a.serialize(n))}return e};a.get=function(f){c();var e=a.deserialize(b.getItem("Backendless")),\nn=e[f],k=n;d(n)&&(delete e[f],b.setItem("Backendless",a.serialize(e)),k=void 0);k&&k.cachePolicy&&delete k.cachePolicy;return k};a.remove=function(d){var e;c();d=d.replace(/([^A-Za-z0-9-])/g,"");var n=a.deserialize(b.getItem("Backendless"));n.hasOwnProperty(d)&&(e=delete n[d]);b.setItem("Backendless",a.serialize(n));return e};a.clear=function(){b.setItem("Backendless",a.serialize({}))};a.getAll=function(){c();var d=a.deserialize(b.getItem("Backendless")),e={},n;for(n in d)d.hasOwnProperty(n)&&(e[n]=\nd[n],null!==e[n]&&e[n].hasOwnProperty("cachePolicy")&&delete e[n].cachePolicy);return e};a.flushExpired=function(){c();var f=a.deserialize(b.getItem("Backendless")),e,n;for(n in f)f.hasOwnProperty(n)&&(e=f[n],d(e)&&(delete f[n],b.setItem("Backendless",a.serialize(f))))};a.getCachePolicy=function(d){c();return(d=a.deserialize(b.getItem("Backendless"))[d])?d.cachePolicy:void 0}}return a}();e.LocalCache.enabled&&e.LocalCache.flushExpired();e.Async=p;u.prototype={addProperty:function(a){this.properties=\nthis.properties||[];this.properties.push(a)}};e.DataQuery=u;z.prototype={_extractQueryOptions:function(a){var b=[];if("undefined"!=typeof a.pageSize){if(1>a.pageSize||100<a.pageSize)throw Error("PageSize can not be less then 1 or greater than 100");b.push("pageSize="+encodeURIComponent(a.pageSize))}if("undefined"!=typeof a.offset){if(0>a.offset)throw Error("Offset can not be less then 0");b.push("offset="+encodeURIComponent(a.offset))}a.sortBy&&(h.isString(a.sortBy)?b.push("sortBy="+encodeURIComponent(a.sortBy)):\nh.isArray(a.sortBy)&&b.push("sortBy="+C(a.sortBy)));a.relationsDepth&&h.isNumber(a.relationsDepth)&&b.push("relationsDepth="+encodeURIComponent(Math.floor(a.relationsDepth)));a.relations&&h.isArray(a.relations)&&b.push("loadRelations="+(a.relations.length?C(a.relations):"*"));return b.join("&")},_wrapAsync:function(a){var b=this;return new p(function(c){c=b._parseResponse(c);a.success(c)},function(b){a.fault(b)})},_parseResponse:function(a){var b=this.model;a=a.fields||a;b=new b;m()||(a=JSON.parse(a));\nt(a,this);r(b,a);return this._formCircDeps(b)},_parseFindResponse:function(a){var b,c=this.model,d;if(a.data){var f=a,e=f.data;a=0;for(b=e.length;a<b;++a)e[a]=e[a].fields||e[a],d=new c,r(d,e[a]),e[a]=d;t(f,this);return f}a=a.fields||a;d=h.isString(c)?{}:new c;r(d,a);return this._formCircDeps(d)},_load:function(a,b){if(a){var c=l(arguments),d=!1;null!=c&&(d=!0,c=this._wrapAsync(c));c=e._ajax({method:"GET",url:a,isAsync:d,asyncHandler:c});return d?c:this._parseResponse(c)}},_replCircDeps:function(a){var b=\n[a],c,d=function(a){for(var e in a)if(a.hasOwnProperty(e)&&"object"==typeof a[e]&&null!=a[e])if(-1!=(c=b.indexOf(a[e]))){var n=b[c],k;if(!(k=b[c].__subID))for(var v=k="";36>v++;k+=51*v?(v^15?8^Math.random()*(v^20?16:4):4).toString(16):"-");n.__subID=k;a[e]={__originSubID:b[c].__subID}}else h.isDate(a[e])?a[e]=a[e].getTime():(b.push(a[e]),d(a[e]))};d(a)},_formCircDeps:function(a){var b={},c=new a.constructor,d=function(a,c){a.hasOwnProperty("__subID")&&(b[a.__subID]=c,delete a.__subID);for(var e in a)a.hasOwnProperty(e)&&\n("object"==typeof a[e]&&null!=a[e]?a[e].hasOwnProperty("__originSubID")?c[e]=b[a[e].__originSubID]:(c[e]=new a[e].constructor,d(a[e],c[e])):c[e]=a[e])};d(a,c);return c},save:function(a,b){this._replCircDeps(a);var c=l(arguments),d=!1,f=this.restUrl,g=a;null!=c&&(d=!0,c=this._wrapAsync(c));c=e._ajax({method:"PUT",url:f,data:JSON.stringify(a),isAsync:d,asyncHandler:c});d||r(g,this._parseResponse(c));return d?c:this._parseResponse(c)},remove:function(a,b){if(!h.isObject(a)&&!h.isString(a))throw Error(\'Invalid value for the "value" argument. The argument must contain only string or object values\');\nvar c=l(arguments),d=!1;null!=c&&(d=!0,c=this._wrapAsync(c));h.isString(a)||a.objectId?(a=a.objectId||a,c=e._ajax({method:"DELETE",url:this.restUrl+"/"+a,isAsync:d,asyncHandler:c})):c=e._ajax({method:"DELETE",url:this.restUrl,data:JSON.stringify(a),isAsync:d,asyncHandler:c});return d?c:this._parseResponse(c)},find:function(a){a=a||{};var b,c,d,f=[],g=this.restUrl,n=l(arguments),k=null!=n;a.properties&&a.properties.length&&(b="props="+C(a.properties));a.condition&&(c="where="+encodeURIComponent(a.condition));\na.options&&(d=this._extractQueryOptions(a.options));null!=n&&(n=this._wrapAsync(n));d&&f.push(d);c&&f.push(c);b&&f.push(b);f=f.join("&");a.url&&(g+="/"+a.url);f&&(g+="?"+f);b=e._ajax({method:"GET",url:g,isAsync:k,asyncHandler:n,cachePolicy:a.cachePolicy});return k?b:this._parseFindResponse(b)},_buildArgsObject:function(){for(var a={},b=arguments.length,c="";b--;)switch(c=Object.prototype.toString.call(arguments[b]).toLowerCase().match(/[a-z]+/g)[1],c){case "number":a.options=a.options||{};a.options.relationsDepth=\narguments[b];break;case "string":a.url=arguments[b];break;case "array":a.options=a.options||{};a.options.relations=arguments[b];break;case "object":arguments[b].hasOwnProperty("cachePolicy")&&(a.cachePolicy=arguments[b].cachePolicy)}return a},findById:function(){var a;if(h.isString(arguments[0])){a=this._buildArgsObject.apply(this,arguments);if(!a.url)throw Error(\'missing argument "object ID" for method findById()\');return this.find.apply(this,[a].concat(Array.prototype.slice.call(arguments)))}if(h.isObject(arguments[0])){a=\narguments[0];var b=l(arguments),c=this.restUrl,d=null!=b,f="/pk?",g;for(g in a)f+=g+"="+a[g]+"&";null!=b&&(b=this._wrapAsync(b));a="Object"==A.call(arguments[0])?e._ajax({method:"GET",url:c+f.replace(/&$/,""),isAsync:d,asyncHandler:b}):e._ajax({method:"PUT",url:c,data:JSON.stringify(a),isAsync:d,asyncHandler:b});return d?a:this._parseResponse(a)}throw Error(\'Invalid value for the "value" argument. The argument must contain only string or object values\');},loadRelations:function(a,b){if(!a)throw Error("missing object argument for method loadRelations()");\nif(!h.isObject(a))throw Error(\'Invalid value for the "value" argument. The argument must contain only object values\');var c=this.restUrl+"/relations";if(b)if(h.isArray(b))c="*"==b[0]?c+("?relationsDepth="+b.length):c+("?loadRelations="+b[0]+"&relationsDepth="+b.length);else throw Error(\'Invalid value for the "options" argument. The argument must contain only array values\');c=e._ajax({method:"PUT",url:c,data:JSON.stringify(a)});r(a,c)},findFirst:function(){var a=this._buildArgsObject.apply(this,arguments);\na.url="first";return this.find.apply(this,[a].concat(Array.prototype.slice.call(arguments)))},findLast:function(){var a=this._buildArgsObject.apply(this,arguments);a.url="last";return this.find.apply(this,[a].concat(Array.prototype.slice.call(arguments)))}};var I={},V={save:function(a,b,c){var d=l(arguments);if(h.isString(a))return e._ajax({method:"POST",url:e.appPath+"/data/"+a,data:JSON.stringify(b),isAsync:!1,asyncHandler:d});if(h.isObject(a))return(new z(a)).save(a,b,c)},getView:function(a,b,\nc,d,f){var g=l(arguments),n=null!=g;if(h.isString(a)){var k=e.appPath+"/data/"+a;1<arguments.length&&!(arguments[1]instanceof e.Async)&&(k+="?");h.isString(b)?k+="where="+b:d=c=b;h.isNumber(c)&&(k+="&"+(new z)._extractQueryOptions({pageSize:c}));h.isNumber(d)&&(k+="&"+(new z)._extractQueryOptions({offset:d}));return e._ajax({method:"GET",url:k,isAsync:n,asyncHandler:g})}throw Error("View name is required string parameter");},callStoredProcedure:function(a,b,c){var d=l(arguments),f=null!=d;if(h.isString(a)){var g=\ne.appPath+"/data/"+a,n={};h.isObject(b)&&(n=JSON.stringify(b));return e._ajax({method:"POST",url:g,data:n,isAsync:f,asyncHandler:d})}throw Error("Stored Procedure name is required string parameter");},of:function(a){var b;if(h.isString(a)){if("users"===a.toLowerCase())throw Error("Table \'Users\' is not accessible through this signature. Use Backendless.Data.of( BackendlessUser.class ) instead");b=a}else b=A.call(a);var c=I[b];c||(c=new z(a),I[b]=c);return c},describe:function(a,b){a=h.isString(a)?\na:A.call(a);var c=l(arguments);return e._ajax({method:"GET",url:e.appPath+"/data/"+a+"/properties",isAsync:null!=c,asyncHandler:c})}};J.prototype={FIND:{grantUser:function(a,b,c){return e.Data.Permissions.sendRequest(a,null,b,"FIND","GRANT",c)},grantRole:function(a,b,c){return e.Data.Permissions.sendRequest(null,a,b,"FIND","GRANT",c)},grant:function(a,b){return e.Data.Permissions.sendRequest("*",null,a,"FIND","GRANT",b)},denyUser:function(a,b,c){return e.Data.Permissions.sendRequest(a,null,b,"FIND",\n"DENY",c)},denyRole:function(a,b,c){return e.Data.Permissions.sendRequest(null,a,b,"FIND","DENY",c)},deny:function(a,b){return e.Data.Permissions.sendRequest("*",null,a,"FIND","DENY",b)}},REMOVE:{grantUser:function(a,b,c){return e.Data.Permissions.sendRequest(a,null,b,"REMOVE","GRANT",c)},grantRole:function(a,b,c){return e.Data.Permissions.sendRequest(null,a,b,"REMOVE","GRANT",c)},grant:function(a,b){return e.Data.Permissions.sendRequest("*",null,a,"REMOVE","GRANT",b)},denyUser:function(a,b,c){return e.Data.Permissions.sendRequest(a,\nnull,b,"REMOVE","DENY",c)},denyRole:function(a,b,c){return e.Data.Permissions.sendRequest(null,a,b,"REMOVE","DENY",c)},deny:function(a,b){return e.Data.Permissions.sendRequest("*",null,a,"REMOVE","DENY",b)}},UPDATE:{grantUser:function(a,b,c){return e.Data.Permissions.sendRequest(a,null,b,"UPDATE","GRANT",c)},grantRole:function(a,b,c){return e.Data.Permissions.sendRequest(null,a,b,"UPDATE","GRANT",c)},grant:function(a,b){return e.Data.Permissions.sendRequest("*",null,a,"UPDATE","GRANT",b)},denyUser:function(a,\nb,c){return e.Data.Permissions.sendRequest(a,null,b,"UPDATE","DENY",c)},denyRole:function(a,b,c){return e.Data.Permissions.sendRequest(null,a,b,"UPDATE","DENY",c)},deny:function(a,b){return e.Data.Permissions.sendRequest("*",null,a,"UPDATE","DENY",b)}}};K.prototype.___class="Users";e.User=K;var q=null,W=function(){this.restUrl=e.appPath+"/users"};W.prototype={_wrapAsync:function(a){var b=this;return new p(function(c){try{c=JSON.parse(c)}catch(d){}q=b._parseResponse(c);a.success(b._getUserFromResponse(q))},\nfunction(b){a.fault(b)})},_parseResponse:function(a){var b=new e.User;r(b,a);return b},register:function(a,b){if(!(a instanceof e.User))throw Error("Only Backendless.User accepted");var c=l(arguments),d=null!=c;c&&(c=this._wrapAsync(c));c=e._ajax({method:"POST",url:this.restUrl+"/register",isAsync:d,asyncHandler:c,data:JSON.stringify(a)});return d?c:this._parseResponse(c)},getUserRoles:function(a){var b=l(arguments),c=null!=b;b&&(b=this._wrapAsync(b));b=e._ajax({method:"GET",url:this.restUrl+"/userroles",\nisAsync:c,asyncHandler:b});return c?b:this._parseResponse(b)},roleHelper:function(a,b,c,d){if(!a)throw Error("Username can not be empty");if(!b)throw Error("Rolename can not be empty");var f=l(arguments),g=null!=f;f&&(f=this._wrapAsync(f));return e._ajax({method:"POST",url:this.restUrl+"/"+d,isAsync:g,asyncHandler:f,data:JSON.stringify({user:a,roleName:b})})},assignRole:function(a,b,c){return this.roleHelper(a,b,c,"assignRole")},unassignRole:function(a,b,c){return this.roleHelper(a,b,c,"unassignRole")},\nlogin:function(a,b,c,d){if(!a)throw Error("Username can not be empty");if(!b)throw Error("Password can not be empty");e.LocalCache.remove("user-token");e.LocalCache.remove("current-user-id");e.LocalCache.set("stayLoggedIn",!1);h.isBoolean(c)&&e.LocalCache.set("stayLoggedIn",c);var f=l(arguments),g=null!=f;f&&(f=this._wrapAsync(f));f=e._ajax({method:"POST",url:this.restUrl+"/login",isAsync:g,asyncHandler:f,data:JSON.stringify({login:a,password:b})});if(g)return f;q=this._parseResponse(f);return this._getUserFromResponse(q)},\n_getUserFromResponse:function(a){e.LocalCache.set("current-user-id",a.objectId);var b=new e.User,c;for(c in a)a.hasOwnProperty(c)&&("user-token"==c?e.LocalCache.get("stayLoggedIn")&&e.LocalCache.set("user-token",a[c]):b[c]=a[c]);return b},loggedInUser:function(){return e.LocalCache.get("current-user-id")},describeUserClass:function(a){var b=l(arguments);return e._ajax({method:"GET",url:this.restUrl+"/userclassprops",isAsync:null!=b,asyncHandler:b})},restorePassword:function(a,b){if(!a)throw"Username can not be empty";\nvar c=l(arguments),d=null!=c;return e._ajax({method:"GET",url:this.restUrl+"/restorepassword/"+encodeURIComponent(a),isAsync:d,asyncHandler:c})},logout:function(a){var b=l(arguments),c=null!=b,d=c?b.fault:null,f=c?b.success:null,g=function(){e.LocalCache.remove("user-token");e.LocalCache.remove("current-user-id");e.LocalCache.remove("stayLoggedIn");q=null},n=function(){g();h.isFunction(f)&&f()},k=function(a){h.isObject(a)&&-1!=[3064,3091,3090,3023].indexOf(a.code)&&g();h.isFunction(d)&&d(a)};b&&(b.fault=\nk,b.success=n);try{var v=e._ajax({method:"GET",url:this.restUrl+"/logout",isAsync:c,asyncHandler:b})}catch(ea){k(ea)}if(c)return v;g()},getCurrentUser:function(){if(q)return this._getUserFromResponse(q);if(e.LocalCache.get("stayLoggedIn")){var a=e.LocalCache.get("current-user-id");return e.Data.of(e.User).findById(a)}return null},update:function(a,b){var c=l(arguments),d=null!=c;c&&(c=this._wrapAsync(c));c=e._ajax({method:"PUT",url:this.restUrl+"/"+a.objectId,isAsync:d,asyncHandler:c,data:JSON.stringify(a)});\nreturn d?c:this._parseResponse(c)},loginWithFacebook:function(a,b,c,d){this._loginSocial("Facebook",a,b,c,d)},loginWithGooglePlus:function(a,b,c,d){this._loginSocial("GooglePlus",a,b,c,d)},loginWithTwitter:function(a,b){this._loginSocial("Twitter",a,null,b,null)},_socialContainer:function(a,b){var c;if(b){var d;b=b[0];c=document.createElement("div");c.innerHTML="Loading...";b.appendChild(c);b.style.cursor="wait";this.closeContainer=function(){b.style.cursor="default";b.removeChild(d)};this.removeLoading=\nfunction(){b.removeChild(c)};this.doAuthorizationActivity=function(a){this.removeLoading();d=document.createElement("iframe");d.frameBorder=0;d.width=b.style.width;d.height=b.style.height;d.id="SocialAuthFrame";d.setAttribute("src",a+"&amp;output=embed");b.appendChild(d);d.onload=function(){b.style.cursor="default"}}}else b=window.open("",a+" authorization","height=250,width=450,scrollbars=0,toolbar=0,menubar=0,location=0,resizable=0,status=0,titlebar=0",!1),c=b.document.getElementsByTagName("body")[0].innerHTML,\nc="Loading...",b.document.getElementsByTagName("html")[0].style.cursor="wait",this.closeContainer=function(){b.close()},this.removeLoading=function(){c=null},this.doAuthorizationActivity=function(a){b.location.href=a;b.onload=function(){b.document.getElementsByTagName("html")[0].style.cursor="default"}}},_loginSocial:function(a,b,c,d,f){var g=new this._socialContainer(a,f),n=l(arguments);n&&(n=this._wrapAsync(n));h.addEvent("message",window,function(a){a.origin==e.serverURL&&(a=JSON.parse(a.data),\na.fault?n.fault(a.fault):(q=this.Backendless.UserService._parseResponse(a),n.success(this.Backendless.UserService._getUserFromResponse(q))),h.removeEvent("message",window),g.closeContainer())});var k=new e.Async(function(a){g.doAuthorizationActivity(a)},function(a){g.closeContainer();n.fault(a)}),v=b||c?{}:null;b&&(v.fieldsMapping=b);c&&(v.permissions=c);e._ajax({method:"POST",url:this.restUrl+"/social/oauth/"+a.toLowerCase()+"/request_url",isAsync:!0,asyncHandler:k,data:JSON.stringify(v)})},loginWithFacebookSdk:function(a,\nb){if(!FB)throw Error("Facebook SDK not found");var c=this;FB.getLoginStatus(function(d){"connected"===d.status?c._sendSocialLoginRequest(c,d,"facebook",a,b):FB.login(function(d){c._sendSocialLoginRequest(c,d,"facebook",a,b)})})},loginWithGooglePlusSdk:function(a,b){if(!gapi)throw Error("Google Plus SDK not found");var c=this;gapi.auth.authorize({client_id:a.client_id,scope:"https://www.googleapis.com/auth/plus.login"},function(d){delete d["g-oauth-window"];c._sendSocialLoginRequest(c,d,"googleplus",\na,b)})},_sendSocialLoginRequest:function(a,b,c,d,f){d&&(b.fieldsMapping=d);d=new e.Async(function(b){q=a._parseResponse(b);f.success(a._getUserFromResponse(q))},function(a){f.fault(a)});e._ajax({method:"POST",url:a.restUrl+"/social/"+c+"/login/"+e.applicationId,isAsync:!0,asyncHandler:d,data:JSON.stringify(b)})},isValidLogin:function(a){var b="",b=e.LocalCache,c=l(arguments),d=null!=c;c&&(c=this._wrapAsync(c));if(b.get("user-token"))if(b=b.get("user-token"),a)e._ajax({method:"GET",url:e.serverURL+\n"/"+e.appVersion+"/users/isvalidusertoken/"+b,isAsync:d,asyncHandler:c});else try{return e._ajax({method:"GET",url:e.serverURL+"/"+e.appVersion+"/users/isvalidusertoken/"+b})?!0:!1}catch(f){return!1}else return e.UserService.getCurrentUser()?!0:!1}};L.prototype={UNITS:{METERS:"METERS",KILOMETERS:"KILOMETERS",MILES:"MILES",YARDS:"YARDS",FEET:"FEET"},_wrapAsync:function(a){var b=this;return new p(function(c){c=b._parseResponse(c);a.success(c)},function(b){a.fault(b)})},_parseResponse:function(a){a=\na.collection;t(a,this);return a},_load:function(a,b){var c=l(arguments),d=null!=c,c=e._ajax({method:"GET",url:a,isAsync:d,asyncHandler:c});return d?c:this._parseResponse(c)},_findHelpers:{searchRectangle:function(a){return["nwlat="+a[0],"nwlon="+a[1],"selat="+a[2],"selon="+a[3]].join("&")},latitude:function(a){return"lat="+a},longitude:function(a){return"lon="+a},metadata:function(a){return"metadata="+JSON.stringify(a)},units:function(a){return"units="+a},radius:function(a){return"r="+a},categories:function(a){a=\nh.isString(a)?[a]:a;return"categories="+C(a)},includeMetadata:function(a){return"includemetadata="+a},pageSize:function(a){if(1>a||100<a)throw Error("PageSize can not be less then 1 or greater than 100");return"pagesize="+a},offset:function(a){if(0>a)throw Error("Offset can not be less then 0");return"offset="+a},relativeFindPercentThreshold:function(a){if(0>=a)throw Error("Threshold can not be less then or equal 0");return"relativeFindPercentThreshold="+a},relativeFindMetadata:function(a){return"relativeFindMetadata="+\nencodeURIComponent(JSON.stringify(a))},condition:function(a){return"whereClause="+encodeURIComponent(a)},degreePerPixel:function(a){return"dpp="+a},clusterGridSize:function(a){return"clustergridsize="+a},geoFence:function(a){return"geoFence="+a}},addPoint:function(a,b){if(void 0===a.latitude||void 0===a.longitude)throw"Latitude or longitude not a number";a.categories=a.categories||["Default"];a.categories=h.isArray(a.categories)?a.categories:[a.categories];var c=l(arguments);if(null!=c)var d=!0;c=\nfunction(a){return new p(function(b){var c=b.geopoint,d=new GeoPoint;d.categories=c.categories;d.latitude=c.latitude;d.longitude=c.longitude;d.metadata=c.metadata;d.objectId=c.objectId;b.geopoint=d;a.success(b)},function(b){a.fault(b)})}(c);return e._ajax({method:"PUT",url:this.restUrl+"/points",data:JSON.stringify(a),isAsync:d,asyncHandler:c})},findUtil:function(a,b){var c=a.url,d=l(arguments),f=!1;if(a.searchRectangle&&a.radius)throw Error("Inconsistent geo query. Query should not contain both rectangle and radius search parameters.");\nif(!a.radius||void 0!==a.latitude&&void 0!==a.longitude)if(!a.relativeFindMetadata&&!a.relativeFindPercentThreshold||a.relativeFindMetadata&&a.relativeFindPercentThreshold){var c=c+(a.searchRectangle?"/rect?":"/points?"),c=c+(a.units?"units="+a.units:""),g;for(g in a)a.hasOwnProperty(g)&&(this._findHelpers.hasOwnProperty(g)&&void 0!=a[g])&&(c+="&"+this._findHelpers[g](a[g]))}else throw Error("Inconsistent geo query. Query should contain both relativeFindPercentThreshold and relativeFindMetadata or none of them");\nelse throw Error("Latitude and longitude should be provided to search in radius");var c=c.replace(/\\?&/g,"?"),n=this;null!=d&&(f=!0);d=function(b){return new p(function(c){for(var d=c.collection.data,e=0;e<d.length;e++){var f=null;d[e].hasOwnProperty("totalPoints")?(f=new GeoCluster,f.totalPoints=d[e].totalPoints,f.geoQuery=a):f=new GeoPoint;f.categories=d[e].categories;f.latitude=d[e].latitude;f.longitude=d[e].longitude;f.metadata=d[e].metadata;f.objectId=d[e].objectId;f.distance=d[e].distance;c.collection.data[e]=\nf}c=n._parseResponse(c);b.success(c)},function(a){b.fault(a)})}(d);c=e._ajax({method:"GET",url:c,isAsync:f,asyncHandler:d});return f?c:this._parseResponse(c)},find:function(a,b){a.url=this.restUrl;return this.findUtil(a,b)},loadMetadata:function(a,b){var c=this.restUrl+"/points/",d=l(arguments),f=!1;if(a.objectId)if(a instanceof GeoCluster)if(a.geoQuery instanceof BackendlessGeoQuery){var c=c+(a.objectId+"/metadata?"),g;for(g in a.geoQuery)a.geoQuery.hasOwnProperty(g)&&(this._findHelpers.hasOwnProperty(g)&&\nvoid 0!=a.geoQuery[g])&&(c+="&"+this._findHelpers[g](a.geoQuery[g]))}else throw Error("Invalid GeoCluster object. Make sure to obtain an instance of GeoCluster using the Backendless.Geo.find API");else if(a instanceof GeoPoint)c+=a.objectId+"/metadata";else throw Error("Method argument must be a valid instance of GeoPoint or GeoCluster persisted on the server");else throw Error("Method argument must be a valid instance of GeoPoint or GeoCluster persisted on the server");null!=d&&(f=!0);return e._ajax({method:"GET",\nurl:c,isAsync:f,asyncHandler:d})},getClusterPoints:function(a,b){var c=this.restUrl+"/clusters/",d=l(arguments),f=!1;if(a.objectId)if(a instanceof GeoCluster)if(a.geoQuery instanceof BackendlessGeoQuery){var c=c+(a.objectId+"/points?"),g;for(g in a.geoQuery)a.geoQuery.hasOwnProperty(g)&&(this._findHelpers.hasOwnProperty(g)&&void 0!=a.geoQuery[g])&&(c+="&"+this._findHelpers[g](a.geoQuery[g]))}else throw Error("Invalid GeoCluster object. Make sure to obtain an instance of GeoCluster using the Backendless.Geo.find API");\nelse throw Error("Method argument must be a valid instance of GeoCluster persisted on the server");else throw Error("Method argument must be a valid instance of GeoCluster persisted on the server");var n=this;null!=d&&(f=!0);d=function(a){return new p(function(b){for(var c=b.collection.data,d=0;d<c.length;d++){var e=null,e=new GeoPoint;e.categories=c[d].categories;e.latitude=c[d].latitude;e.longitude=c[d].longitude;e.metadata=c[d].metadata;e.objectId=c[d].objectId;b.collection.data[d]=e}b=n._parseResponse(b);\na.success(b)},function(b){a.fault(b)})}(d);c=e._ajax({method:"GET",url:c,isAsync:f,asyncHandler:d});return f?c:this._parseResponse(c)},relativeFind:function(a,b){if(a.relativeFindMetadata&&a.relativeFindPercentThreshold)return a.url=this.restUrl+"/relative",this.findUtil(a,b);throw Error("Inconsistent geo query. Query should contain both relativeFindPercentThreshold and relativeFindMetadata");},addCategory:function(a,b){if(!a)throw Error("Category name is required.");var c=l(arguments),c=e._ajax({method:"PUT",\nurl:this.restUrl+"/categories/"+a,isAsync:null!=c,asyncHandler:c});return"undefined"===typeof c.result?c:c.result},getCategories:function(a){var b=l(arguments);return e._ajax({method:"GET",url:this.restUrl+"/categories",isAsync:null!=b,asyncHandler:b})},deleteCategory:function(a,b){if(!a)throw Error("Category name is required.");var c=l(arguments);try{var d=e._ajax({method:"DELETE",url:this.restUrl+"/categories/"+a,isAsync:null!=c,asyncHandler:c})}catch(f){if(404==f.statusCode)d=!1;else throw f;}return"undefined"===\ntypeof d.result?d:d.result},deletePoint:function(a,b){if(!a||h.isFunction(a))throw Error("Point argument name is required, must be string (object Id), or point object");var c=h.isString(a)?a:a.objectId,d=l(arguments);try{var f=e._ajax({method:"DELETE",url:this.restUrl+"/points/"+c,isAsync:null!=d,asyncHandler:d})}catch(g){if(404==g.statusCode)f=!1;else throw g;}return"undefined"===typeof f.result?f:f.result},getFencePoints:function(a,b,c){b=b||new BackendlessGeoQuery;if(!h.isString(a))throw Error("Invalid value for parameter \'geoFenceName\'. Geo Fence Name must be a String");\nif(!(b instanceof BackendlessGeoQuery))throw Error("Invalid geo query. Query should be instance of BackendlessGeoQuery");b.geoFence=a;b.url=this.restUrl;return this.findUtil(b,c)},_runFenceAction:function(a,b,c,d){if(!h.isString(b))throw Error("Invalid value for parameter \'geoFenceName\'. Geo Fence Name must be a String");if(c&&!(c instanceof e.Async||c instanceof GeoPoint||c.objectId))throw Error("Method argument must be a valid instance of GeoPoint persisted on the server");var f=l(arguments),f=\n{method:"POST",url:this.restUrl+"/fence/"+a+"?geoFence="+b,isAsync:null!=f,asyncHandler:f};c&&(f.data=JSON.stringify(c));return e._ajax(f)},runOnStayAction:function(a,b,c){return this._runFenceAction("onstay",a,b,c)},runOnExitAction:function(a,b,c){return this._runFenceAction("onexit",a,b,c)},runOnEnterAction:function(a,b,c){return this._runFenceAction("onenter",a,b,c)},_getFences:function(a){return e._ajax({method:"GET",url:this.restUrl+"/fences"+(a?"?geoFence="+a:"")})},EARTH_RADIUS:6378100,_distance:function(a,\nb,c,d){b=(b-d)*Math.PI/180;a=a*Math.PI/180;c=c*Math.PI/180;return this.EARTH_RADIUS*Math.acos(Math.sin(a)*Math.sin(c)+Math.cos(a)*Math.cos(c)*Math.cos(b))},_updateDegree:function(a){for(a+=180;0>a;)a+=360;return 0==a?180:a%360-180},_countLittleRadius:function(a){a=Math.abs(a)/180*this.EARTH_RADIUS;var b=2*this.EARTH_RADIUS,c=(Math.pow(b,2)-b*Math.sqrt(Math.pow(b,2)-4*Math.pow(a,2)))/2;return b/2-Math.sqrt(c-Math.pow(a,2))},_isDefiniteRect:function(a,b){return null!=a&&null!=b},_getOutRectangle:function(){return 1==\narguments.length?this._getOutRectangleNodes(arguments[1]):this._getOutRectangleCircle(arguments[0],arguments[1])},_getOutRectangleCircle:function(a,b){var c=this._distance(a.latitude,a.longitude,b.latitude,b.longitude),d=a.latitude+180*c/(Math.PI*this.EARTH_RADIUS)*(0<a.latitude?1:-1),e=this._countLittleRadius(d),g,n;e>c?(c=a.longitude-180*c/e,e=2*a.longitude-c,c=this._updateDegree(c),e=180==e%360?180:this._updateDegree(e)):(c=-180,e=180);0<a.latitude?(g=d,n=2*a.latitude-d):(n=d,g=2*a.latitude-d);\nreturn[Math.min(g,90),c,Math.max(n,-90),e]},_getOutRectangleNodes:function(a){for(var b=a[0].latitude,c=a[0].longitude,d=a[0].latitude,e=a[0].longitude,g=0,n=0,k=0,h=1;h<a.length;h++){a[h].latitude>b&&(b=a[h].latitude);a[h].latitude<d&&(d=a[h].latitude);var l=a[h].latitude-a[h-1].latitude;if(0>l&&-180<l||270<l)270<l&&(l-=360),k+=l,k<g&&(g=k);else if(0<l&&180>=l||-270>=l)-270>=l&&(l+=360),k+=l,k>n&&(n=k)}c+=g;e+=n;360<=e-c?(e=180,c=-180):(e=this._updateDegree(e),c=this._updateDegree(c));return[b,c,\nd,e]},_getPointPosition:function(a,b,c){var d=c.longitude-b.longitude;if(0>d&&-180<d||180<d)d=b,b=c,c=d;if(a.latitude<b.latitude==a.latitude<c.latitude)return"NO_INTERSECT";d=a.longitude-b.longitude;if(0>d&&-180<d||180<d)d=(d-360)%360;return 0<(c.longitude-b.longitude+360)%360*(a.latitude-b.latitude)/(c.latitude-b.latitude)-d?"INTERSECT":"NO_INTERSECT"},_isPointInRectangular:function(a,b,c){return a.latitude>b.latitude||a.latitude<c.latitude?!1:b.longitude>c.longitude?a.longitude>=b.longitude||a.longitude<=\nc.longitude:a.longitude>=b.longitude&&a.longitude<=c.longitude},_isPointInCircle:function(a,b,c){return this._distance(a.latitude,a.longitude,b.latitude,b.longitude)<=c},_isPointInShape:function(a,b){for(var c=0,d=0;d<b.length;d++)switch(this._getPointPosition(a,b[d],b[(d+1)%b.length])){case "INTERSECT":c++}return 1==c%2},_isPointInFence:function(a,b){return this._isPointInRectangular(a,b.nwPoint,b.sePoint)||"CIRCLE"==b.type&&this._isPointInCircle(a,b.nodes[0],this._distance(b.nodes[0].latitude,b.nodes[0].longitude,\nb.nodes[1].latitude,b.nodes[1].longitude))||"SHAPE"==b.type&&this._isPointInShape(a,b.nodes)},_typesMapper:{RECT:function(a){a.nwPoint=a.nodes[0];a.sePoint=a.nodes[1]},CIRCLE:function(a,b){var c=b._getOutRectangle(a.nodes[0],a.nodes[1]);a.nwPoint={latitude:c[0],longitude:c[1]};a.sePoint={latitude:c[2],longitude:c[3]}},SHAPE:function(a,b){var c=b._getOutRectangle(a.nodes[0],a.nodes[1]);a.nwPoint={latitude:c[0],longitude:c[1]};a.sePoint={latitude:c[2],longitude:c[3]}}},_maxDuration:5E3,_timers:{},_checkPosition:function(a,\nb,c,d,e,g,h){var k=this;for(a=0;a<k._trackedFences.length;a++){var l=k._isDefiniteRect(k._trackedFences[a].nwPoint,k._trackedFences[a].sePoint)&&k._isPointInFence(b,k._trackedFences[a]);c=null;l!=g[k._trackedFences[a].geofenceName]&&(c=g[k._trackedFences[a].geofenceName]?"onexit":"onenter",g[k._trackedFences[a].geofenceName]=l);if(c){var l=1E3*k._trackedFences[a].onStayDuration,m=function(a,b,c){k._timers[k._trackedFences[a].geofenceName]=setTimeout(function(){e.onstay(k._trackedFences[a].geofenceName,\nk._trackedFences[a].objectId,b.latitude,b.longitude)},c)},p=function(a,b,c,d){k._timers[k._trackedFences[a].geofenceName]=setTimeout(function(){k._runFenceAction("onstay",k._trackedFences[a].geofenceName,d,h)},c)};if(e)if("onenter"==c)if(e[c](k._trackedFences[a].geofenceName,k._trackedFences[a].objectId,b.latitude,b.longitude),-1<l)m(a,b,l);else e.onstay(k._trackedFences[a].geofenceName,k._trackedFences[a].objectId,b.latitude,b.longitude);else clearTimeout(k._timers[k._trackedFences[a].geofenceName]),\ne[c](k._trackedFences[a].geofenceName,k._trackedFences[a].objectId,b.latitude,b.longitude);else d&&(d.latitude=b.latitude,d.longitude=b.longitude,"onenter"==c?(k._runFenceAction(c,k._trackedFences[a].geofenceName,d,h),-1<l?p(a,b,l,d):k._runFenceAction("onstay",k._trackedFences[a].geofenceName,d,h)):(clearTimeout(k._timers[k._trackedFences[a].geofenceName]),k._runFenceAction(c,k._trackedFences[a].geofenceName,d,h)))}}},_mobilecheck:function(){var a=!1,b=navigator.userAgent||navigator.vendor||window.opera;\nif(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(b.substr(0,\n4)))a=!0;return a},_trackedFences:[],_lastResults:{},_startMonitoring:function(a,b,c){function d(a,b,c){for(var d=a.length,e=!1,f=0;f<d&&!(e=a[f][c]===b[c]);f++);return e}function e(d){k._checkPosition(a,d.coords,m,l?b:null,l?null:b,k._lastResults,c)}function g(a){throw Error("Error during current position calculation. Error "+a.message);}function h(){navigator.geolocation.getCurrentPosition(e,g,{timeout:5E3,enableHighAccuracy:!0})}var k=this;if(b instanceof GeoPoint)var l=!0;for(var m=this._getFences(a),\np=0;p<m.length;p++)d(k._trackedFences,m[p],"geofenceName")||(k._typesMapper[m[p].type](m[p],k),k._lastResults[m[p].geofenceName]=!1,k._trackedFences.push(m[p]));if(!this.monitoringId)if(m.length)this.monitoringId=this._mobilecheck()?navigator.geolocation.watchPosition(e,g,{timeout:k._maxDuration,enableHighAccuracy:!0}):setInterval(h,k._maxDuration);else throw Error("Please, add some fences to start monitoring");},startGeofenceMonitoringWithInAppCallback:function(a,b,c){this._startMonitoring(a,b,c)},\nstartGeofenceMonitoringWithRemoteCallback:function(a,b,c){this._startMonitoring(a,b,c)},stopGeofenceMonitoring:function(a){if(a)for(var b=0;b<this._trackedFences.length;b++)this._trackedFences[b].geofenceName==a&&(this._trackedFences.splice(b,1),delete this._lastResults[a]);else this._lastResuls={},this._trackedFences=[];this._trackedFences.length||(this.monitoringId=null,this._mobilecheck()?navigator.geolocation.clearWatch(this.monitoringId):clearInterval(this.monitoringId))}};D.prototype={on:function(a,\nb){if(!a)throw Error("Event name not specified");if(!b)throw Error("Handler not specified");this.eventHandlers[a]=this.eventHandlers[a]||[];this.eventHandlers[a].push(b)},fireEvent:function(a,b){var c=this.eventHandlers[a]||[],d,e;e=0;for(d=c.length;e<d;++e)c[e](b)}};E.prototype=new D;r(E.prototype,{onMessage:function(a){clearTimeout(this.timeout);var b=this;this.timer=setTimeout(function(){b.poll()},this.interval);this.fireEvent("messageReceived",a)},poll:function(){var a=this;this.timeout=setTimeout(function(){a.onTimeout()},\n3E4);this.xhr=e._ajax({method:"GET",url:this.restUrl,isAsync:!0,asyncHandler:this.responder})},close:function(){clearTimeout(this.timer);clearTimeout(this.timeout);this.needReconnect=!1;this.xhr&&this.xhr.abort()},onTimeout:function(){this.xhr&&this.xhr.abort()},onError:function(){clearTimeout(this.timer);clearTimeout(this.timeout);if(this.needReconnect){var a=this;this.xhr=null;this.timer=setTimeout(function(){a.poll()},this.interval)}}});F.prototype=new D;r(F.prototype,{onMessage:function(){this.fireEvent("messageReceived",\ndata)},onSocketClose:function(a){this.reconnectWithPolling&&this.fireEvent("socketClose",a)},close:function(){this.reconnectWithPolling=!1;this.socket.close()}});G.prototype={_subscribe:function(a){var b=l(arguments),c=null!=b,d=this,f=new p(function(a){d.subscriptionId=a.subscriptionId;d._startSubscription()},function(a){b.fault(a)}),f=e._ajax({method:"POST",url:this.restUrl+"/subscribe",isAsync:c,data:JSON.stringify(this.options),asyncHandler:f});c||(this.subscriptionId=f.subscriptionId,this._startSubscription())},\n_startSubscription:function(){var a=this;M?(this.proxy=new F(this.channelProperties.websocket+"/"+this.subscriptionId),this.proxy.on("socketClose",function(){a._switchToPolling()}),this.proxy.on("messageReceived",function(){a.responder()})):this._switchToPolling();this._startSubscription=w},cancelSubscription:function(){this.proxy&&this.proxy.close();this._startSubscription=w},_switchToPolling:function(){this.proxy=new E(this.restUrl+"/"+this.subscriptionId);var a=this;this.proxy.on("messageReceived",\nfunction(b){b.messages.length&&a.responder(b)})}};N.prototype={_getProperties:function(a,b){var c=l(arguments),d=null!=c,f=this.channelProperties[a];if(f)return d&&b.success(f),f;c=e._ajax({method:"GET",url:this.restUrl+"/"+a+"/properties",isAsync:d,asyncHandler:c});return this.channelProperties[a]=c},subscribe:function(a,b,c,d){var e=l(arguments);if(null!=e){var g=this,h=new p(function(k){d.success(new G({channelName:a,options:c,channelProperties:k,responder:b,restUrl:g.restUrl,onSubscribe:e}))},\nfunction(a){e.fault(a)});this._getProperties(a,h)}else return h=this._getProperties(a),new G({channelName:a,options:c,channelProperties:h,responder:b,restUrl:this.restUrl})},publish:function(a,b,c,d,f){var g=l(arguments),h=null!=g,k={message:b};if(c){if(!(c instanceof PublishOptions))throw"Use PublishOption as publishOptions argument";r(k,c)}if(d){if(!(d instanceof DeliveryOptions))throw"Use DeliveryOptions as deliveryTarget argument";r(k,d)}return e._ajax({method:"POST",url:this.restUrl+"/"+a,isAsync:h,\nasyncHandler:g,data:JSON.stringify(k)})},sendEmail:function(a,b,c,d,f){var g=l(arguments),n=null!=g,k={};if(a&&!h.isEmpty(a)&&h.isString(a))k.subject=a;else throw"Subject is required parameter and must be a nonempty string";if(b instanceof Bodyparts&&!h.isEmpty(b))k.bodyparts=b;else throw"Use Bodyparts as bodyParts argument, must contain at least one property";if(c&&h.isArray(c)&&!h.isEmpty(c))k.to=c;else throw"Recipients is required parameter, must be a nonempty array";if(d)if(h.isArray(d))h.isEmpty(d)||\n(k.attachment=d);else throw"Attachments must be an array of file IDs from File Service";return e._ajax({method:"POST",url:this.restUrl+"/email",isAsync:n,asyncHandler:g,data:JSON.stringify(k)})},cancel:function(a,b){return e._ajax({method:"DELETE",url:this.restUrl+"/"+a,isAsync:null!=b,asyncHandler:new p(w)})},registerDevice:function(a,b,c){var d=l(arguments),f=null!=d,g=m()?window.device:NodeDevice,n={deviceToken:null,deviceId:g.uuid,os:g.platform,osVersion:g.version};h.isArray(a)&&(n.channels=a);\nfor(var g=0,k=arguments.length;g<k;++g){var p=arguments[g];if(h.isNumber(p)||p instanceof Date)n.expiration=p instanceof Date?p.getTime()/1E3:p}var q=this.restUrl+"/registrations";cordova.exec(function(a){n.deviceToken=a;e._ajax({method:"POST",url:q,data:JSON.stringify(n),isAsync:f,asyncHandler:d})},function(a){console.warn(JSON.stringify(["failed to register ",a]))},"PushNotification","registerDevice",[{projectid:"http://backendless.com",appid:e.applicationId}])},getRegistrations:function(a){var b=\nm()?window.device.uuid:NodeDevice.uuid,c=l(arguments);return e._ajax({method:"GET",url:this.restUrl+"/registrations/"+b,isAsync:null!=c,asyncHandler:c})},unregisterDevice:function(a){var b=m()?window.device.uuid:NodeDevice.uuid,c=l(arguments),b=e._ajax({method:"DELETE",url:this.restUrl+"/registrations/"+b,isAsync:null!=c,asyncHandler:c});try{cordova.exec(w,w,"PushNotification","unregisterDevice",[])}catch(d){console.log(d.message)}return b}};P.prototype={grantUser:function(a,b,c,d){this.varType="user";\nthis.id=a;return this.grant(b,c,d)},grantRole:function(a,b,c,d){this.varType="role";this.id=a;return this.grant(b,c,d)},grant:function(a,b,c){return this.sendRequest("GRANT",a,b,c)},denyUser:function(a,b,c,d){this.varType="role";this.id=a;return this.deny(b,c,d)},denyRole:function(a,b,c,d){this.varType="role";this.id=a;return this.deny(b,c,d)},deny:function(a,b,c){return this.sendRequest("DENY",a,b,c)},sendRequest:function(a,b,c,d){var f=l(arguments),g=null!=f,h={permission:c};h[this.varType]=this.id||\n"*";return e._ajax({method:"PUT",url:this.restUrl+"/"+a+"/"+encodeURIComponent(b),data:JSON.stringify(h),isAsync:g,asyncHandler:f})}};Q.prototype={saveFile:function(a,b,c,d,f){if(!a||!h.isString(a))throw Error(\'Missing value for the "path" argument. The argument must contain a string value\');if(!b||!h.isString(a))throw Error(\'Missing value for the "fileName" argument. The argument must contain a string value\');d instanceof e.Async&&(f=d,d=null);c instanceof File||(c=new Blob([c]));if(28E5<c.size)throw Error("File Content size must be less than 2,800,000 bytes");\na=this.restUrl+"/binary/"+a+(h.isString(b)?"/"+b:"")+(d?"?overwrite=true":"");try{var g=new FileReader;g.fileName=b;g.uploadPath=a;g.onloadend=aa;f&&(g.asyncHandler=f);g.onerror=function(a){f.fault(a)};g.readAsDataURL(c);if(!f)return!0}catch(l){console.log(l)}},upload:function(a,b,c,d){a=a.files||a;b=this.restUrl+"/"+b+"/";if(h.isBoolean(c))var e="?overwrite="+c;if(m())if(window.File&&window.FileList){a instanceof File&&(a=[a]);for(var g=c=0,l=a.length;g<l;g++)try{var k=new FileReader;k.fileName=\na[g].name;k.uploadPath=b+k.fileName+(e?e:"");k.onloadend=$;k.asyncHandler=d;k.onerror=function(a){d.fault(a)};k.readAsBinaryString(a[g])}catch(p){c++}}else c=document.createElement("iframe"),c.id=c.name="ifr"+(new Date).getTime(),c.width=c.height="0",document.body.appendChild(c),k=document.createElement("form"),k.target=c.name,k.enctype="multipart/form-data",k.method="POST",document.body.appendChild(k),k.appendChild(a),a=a.value,(c=a.lastIndexOf("\\\\"))&&(a=a.substring(c+1)),k.action=b+a+(e?e:""),\nk.submit();else throw"Upload File not supported with NodeJS";},listing:function(a,b,c,d,f,g){var n=l(arguments),k=null!=n,m=this.restUrl+"/"+a;1<arguments.length&&!(arguments[1]instanceof e.Async)&&(m+="?");h.isString(b)&&(m+="pattern="+b);h.isBoolean(c)&&(m+="&sub="+c);h.isNumber(d)&&(m+="&pagesize="+d);h.isNumber(f)&&(m+="&offset="+f);return e._ajax({method:"GET",url:m,isAsync:k,asyncHandler:n})},renameFile:function(a,b,c){this._checkPath(a);return this._doAction("rename",{oldPathName:a,newName:b},\nc)},moveFile:function(a,b,c){this._checkPath(a);this._checkPath(b);return this._doAction("move",{sourcePath:a,targetPath:b},c)},copyFile:function(a,b,c){this._checkPath(a);this._checkPath(b);return this._doAction("copy",{sourcePath:a,targetPath:b},c)},_checkPath:function(a){/^\\//.test(a)||(a="/"+a);return a},_doAction:function(a,b,c){var d=l(arguments),f=null!=d,d=e._ajax({method:"PUT",url:this.restUrl+"/"+a,data:JSON.stringify(b),isAsync:f,asyncHandler:d});if(!f)return d},remove:function(a,b){var c=\nl(arguments),d=null!=c,f=0==a.indexOf("http://")||0==a.indexOf("https://")?a:this.restUrl+"/"+a;e._ajax({method:"DELETE",url:f,isAsync:d,asyncHandler:c})},exists:function(a,b){if(!a||!h.isString(a))throw Error(\'Missing value for the "path" argument. The argument must contain a string value\');var c=l(arguments);return e._ajax({method:"GET",url:this.restUrl+"/exists/"+a,isAsync:null!=c,asyncHandler:c})},removeDirectory:function(a,b){var c=l(arguments);e._ajax({method:"DELETE",url:this.restUrl+"/"+a,\nisAsync:null!=c,asyncHandler:c})}};B.prototype._wrapAsync=function(a){return new p(function(b){a.success(b)},function(b){a.fault(b)})};B.prototype.validatePlayPurchase=function(a,b,c,d){if(3>arguments.length)throw Error("Package Name, Product Id, Token must be provided and must be not an empty STRING!");for(var f=arguments.length-2;0<=f;f--)if(!arguments[f]||!h.isString(arguments[f]))throw Error("Package Name, Product Id, Token must be provided and must be not an empty STRING!");var f=l(arguments),\ng=null!=f;f&&(f=this._wrapAsync(f));return e._ajax({method:"GET",url:this.restUrl+"/validate/"+a+"/inapp/"+b+"/purchases/"+c,isAsync:g,asyncHandler:f})};B.prototype.cancelPlaySubscription=function(a,b,c,d){if(3>arguments.length)throw Error("Package Name, Subscription Id, Token must be provided and must be not an empty STRING!");for(var f=arguments.length-2;0<=f;f--)if(!arguments[f]||!h.isString(arguments[f]))throw Error("Package Name, Subscription Id, Token must be provided and must be not an empty STRING!");\nvar f=l(arguments),g=null!=f;f&&(f=this._wrapAsync(f));return e._ajax({method:"POST",url:this.restUrl+"/"+a+"/subscription/"+b+"/purchases/"+c+"/cancel",isAsync:g,asyncHandler:f})};B.prototype.getPlaySubscriptionStatus=function(a,b,c,d){if(3>arguments.length)throw Error("Package Name, Subscription Id, Token must be provided and must be not an empty STRING!");for(var f=arguments.length-2;0<=f;f--)if(!arguments[f]||!h.isString(arguments[f]))throw Error("Package Name, Subscription Id, Token must be provided and must be not an empty STRING!");\nvar f=l(arguments),g=null!=f;f&&(f=this._wrapAsync(f));return e._ajax({method:"GET",url:this.restUrl+"/"+a+"/subscription/"+b+"/purchases/"+c,isAsync:g,asyncHandler:f})};H.prototype._wrapAsync=function(a){return new p(function(b){a.success(b)},function(b){a.fault(b)})};H.prototype.dispatch=function(a,b,c){if(!a||!h.isString(a))throw Error("Event Name must be provided and must be not an empty STRING!");b=h.isObject(b)?b:{};var d=l(arguments),f=null!=d;d&&(d=this._wrapAsync(d));b=b instanceof e.Async?\n{}:b;return e._ajax({method:"POST",url:this.restUrl+"/"+a,data:JSON.stringify(b),isAsync:f,asyncHandler:d})};var X=function(){},Y=[];X.prototype={_wrapAsync:function(a){var b=this;return new p(function(c){c=b._parseResponse(c);a.success(c)},function(b){a.fault(b)})},_parseResponse:function(a){return a},put:function(a,b,c,d){if(!h.isString(a))throw Error("You can use only String as key to put into Cache");if(c instanceof e.Async)d=c,c=null;else if("object"==typeof c&&!d)d=c,c=null;else if("number"!=\ntypeof c)throw Error("You can use only String as timeToLive attribute to put into Cache");h.isObject(b)&&b.constructor!==Object&&(b.___class=b.___class||A.call(b));d=l([d]);var f=!1;null!=d&&(f=!0,d=this._wrapAsync(d));return e._ajax({method:"PUT",url:e.serverURL+"/"+e.appVersion+"/cache/"+a+(c?"?timeout="+c:""),data:JSON.stringify(b),isAsync:f,asyncHandler:d})},expireIn:function(a,b,c){if(h.isString(a)&&(h.isNumber(b)||h.isDate(b))&&b){b=h.isDate(b)?b.getTime():b;var d=l(arguments),f=!1;null!=d&&\n(f=!0,d=this._wrapAsync(d));return e._ajax({method:"PUT",url:e.serverURL+"/"+e.appVersion+"/cache/"+a+"/expireIn?timeout="+b,data:JSON.stringify({}),isAsync:f,asyncHandler:d})}throw Error(\'The "key" argument must be String. The "seconds" argument can be either Number or Date\');},expireAt:function(a,b,c){if(h.isString(a)&&(h.isNumber(b)||h.isDate(b))&&b){b=h.isDate(b)?b.getTime():b;var d=l(arguments),f=!1;null!=d&&(f=!0,d=this._wrapAsync(d));return e._ajax({method:"PUT",url:e.serverURL+"/"+e.appVersion+\n"/cache/"+a+"/expireAt?timestamp="+b,data:JSON.stringify({}),isAsync:f,asyncHandler:d})}throw Error("You can use only String as key while expire in Cache. Second attribute must be declared and must be a Number or Date type");},cacheMethod:function(a,b,c,d){if(!h.isString(b))throw Error(\'The "key" argument must be String\');var f=l(arguments),g=!1;null!=f&&(g=!0,f=this._wrapAsync(f));return e._ajax({method:a,url:e.serverURL+"/"+e.appVersion+"/cache/"+b+(c?"/check":""),isAsync:g,asyncHandler:f})},contains:function(a,\nb){return this.cacheMethod("GET",a,!0,b)},get:function(a,b){if(!h.isString(a))throw Error(\'The "key" argument must be String\');var c=l(arguments),d=!1;null!=c&&(d=!0,c=this._wrapAsync(c));c=e._ajax({method:"GET",url:e.serverURL+"/"+e.appVersion+"/cache/"+a,isAsync:d,asyncHandler:c});if(h.isObject(c)&&c.___class){var f;try{f=new (eval(c.___class))(c)}catch(g){f=new Y[c.___class](c)}return f}return c},remove:function(a,b){return this.cacheMethod("DELETE",a,!1,b)},setObjectFactory:function(a,b){Y[a]=\nb}};var s=function(){},Z=function(a){this.name=a};s.prototype={_wrapAsync:function(a){var b=this;return new p(function(c){c=b._parseResponse(c);a.success(c)},function(b){a.fault(b)})},_parseResponse:function(a){return a},of:function(a){return new Z(a)},getConstructor:function(){return this},counterNameValidation:function(a,b){if(!a)throw Error(\'Missing value for the "counterName" argument. The argument must contain a string value.\');if(!h.isString(a))throw Error(\'Invalid value for the "value" argument. The argument must contain only string values\');\nthis.name=a},implementMethod:function(a,b,c){var d=l(arguments),f=!1;null!=d&&(f=!0,d=this._wrapAsync(d));return e._ajax({method:a,url:e.serverURL+"/"+e.appVersion+"/counters/"+this.name+b,isAsync:f,asyncHandler:d})},incrementAndGet:function(a,b){this.counterNameValidation(a,b);return this.implementMethod("PUT","/increment/get",b)},getAndIncrement:function(a,b){this.counterNameValidation(a,b);return this.implementMethod("PUT","/get/increment",b)},decrementAndGet:function(a,b){this.counterNameValidation(a,\nb);return this.implementMethod("PUT","/decrement/get",b)},getAndDecrement:function(a,b){this.counterNameValidation(a,b);return this.implementMethod("PUT","/get/decrement",b)},reset:function(a,b){this.counterNameValidation(a,b);return this.implementMethod("PUT","/reset",b)},get:function(a,b){this.counterNameValidation(a,b);var c=l(arguments),d=!1;null!=c&&(d=!0,c=this._wrapAsync(c));return e._ajax({method:"GET",url:e.serverURL+"/"+e.appVersion+"/counters/"+this.name,isAsync:d,asyncHandler:c})},implementMethodWithValue:function(a,\nb,c){if(!b)throw Error(\'Missing value for the "value" argument. The argument must contain a numeric value.\');if(!h.isNumber(b))throw Error(\'Invalid value for the "value" argument. The argument must contain only numeric values\');var d=l(arguments),f=!1;null!=d&&(f=!0,d=this._wrapAsync(d));return e._ajax({method:"PUT",url:e.serverURL+"/"+e.appVersion+"/counters/"+this.name+a+(b?b:""),isAsync:f,asyncHandler:d})},addAndGet:function(a,b,c){this.counterNameValidation(a,c);return this.implementMethodWithValue("/get/incrementby?value=",\nb,c)},getAndAdd:function(a,b,c){this.counterNameValidation(a,c);return this.implementMethodWithValue("/incrementby/get?value=",b,c)},compareAndSet:function(a,b,c,d){this.counterNameValidation(a,d);if(!b||!c)throw Error(\'Missing values for the "expected" and/or "updated" arguments. The arguments must contain numeric values\');if(!h.isNumber(b)||!h.isNumber(c))throw Error(\'Missing value for the "expected" and/or "updated" arguments. The arguments must contain a numeric value\');var f=l(arguments),g=!1;\nnull!=f&&(g=!0,f=this._wrapAsync(f));return e._ajax({method:"PUT",url:e.serverURL+"/"+e.appVersion+"/counters/"+this.name+"/get/compareandset?expected="+(b&&c?b+"&updatedvalue="+c:""),isAsync:g,asyncHandler:f})}};Z.prototype={incrementAndGet:function(a){return s.prototype.getConstructor().incrementAndGet(this.name,a)},getAndIncrement:function(a){return s.prototype.getConstructor().getAndIncrement(this.name,a)},decrementAndGet:function(a){return s.prototype.getConstructor().decrementAndGet(this.name,\na)},getAndDecrement:function(a){return s.prototype.getConstructor().getAndDecrement(this.name,a)},reset:function(a){return s.prototype.getConstructor().reset(this.name,a)},get:function(a){return s.prototype.getConstructor().get(this.name,a)},addAndGet:function(a,b){return s.prototype.getConstructor().addAndGet(this.name,a,b)},getAndAdd:function(a,b){return s.prototype.getConstructor().getAndAdd(this.name,a,b)},compareAndSet:function(a,b,c){return s.prototype.getConstructor().getAndAdd(this.name,a,\nb,c)}};e.Logging={restUrl:this.url,loggers:{},logInfo:[],messagesCount:0,numOfMessages:10,timeFrequency:1,getLogger:function(a){if(!h.isString(a))throw Error("Invalid \'loggerName\' value. LoggerName must be a string value");this.loggers[a]||(this.loggers[a]=new R(a));return this.loggers[a]},flush:function(){e._ajax({method:"PUT",url:e.serverURL+"/"+e.appVersion+"/log",data:JSON.stringify(this.logInfo)});this.flushInterval&&clearTimeout(this.flushInterval);this.logInfo=[];this.messagesCount=0},sendRequest:function(){(function(a,\nb){this.flushInterval=setTimeout(function(){e._ajax({method:"PUT",url:e.serverURL+"/"+e.appVersion+"/log",data:JSON.stringify(a),isAsync:!m()});this.messagesCount=0},1E3*b)})(this.logInfo,this.timeFrequency);this.logInfo=[]},checkMessagesLen:function(){this.messagesCount>this.numOfMessages-1&&this.sendRequest()},setLogReportingPolicy:function(a,b){this.numOfMessages=a;this.timeFrequency=b;this.checkMessagesLen()}};R.prototype={debug:function(a){return y(this.name,"DEBUG",a)},info:function(a){return y(this.name,\n"INFO",a)},warn:function(a,b){return y(this.name,"WARN",a,b)},error:function(a,b){return y(this.name,"ERROR",a,b)},fatal:function(a,b){return y(this.name,"FATAL",a,b)},trace:function(a){return y(this.name,"TRACE",a)}};S.prototype={invoke:function(a,b,c,d,f){var g=l(arguments),h=null!=g;return e._ajax({method:"POST",url:e.serverURL+"/"+e.appVersion+"/services/"+a+"/"+b+"/"+c,data:JSON.stringify(d),isAsync:h,asyncHandler:g})}};e.initApp=function(a,b,c){e.applicationId=a;e.secretKey=b;e.appVersion=c;\ne.appPath=[e.serverURL,e.appVersion].join("/");e.UserService=new W;e.Users=e.UserService;e.Geo=new L;e.Persistence=V;e.Data=V;e.Data.Permissions=new J;e.Messaging=new N;e.Files=new Q;e.Files.Permissions=new P;e.Commerce=new B;e.Events=new H;e.Cache=new X;e.Counters=new s;e.CustomServices=new S;I={};q=null};m()||(module.exports=e)})();\nvar BackendlessGeoQuery=function(){this.searchRectangle=void 0;this.categories=[];this.includeMetadata=!0;this.clusterGridSize=this.degreePerPixel=this.units=this.radius=this.longitude=this.latitude=this.pageSize=this.relativeFindPercentThreshold=this.relativeFindMetadata=this.condition=this.metadata=void 0};\nBackendlessGeoQuery.prototype={addCategory:function(){this.categories=this.categories||[];this.categories.push()},setClusteringParams:function(m,t,p,u){u=u||0;m=parseFloat(m);t=parseFloat(t);p=parseInt(p);u=parseInt(u);if(!isFinite(m)||-180>m||180<m)throw Error("The westLongitude value must be a number in the range between -180 and 180");if(!isFinite(t)||-180>t||180<t)throw Error("The eastLongitude value must be a number in the range between -180 and 180");if(!isFinite(p)||1>p)throw Error("The mapWidth value must be a number greater or equal to 1");\nif(!isFinite(u)||0>u)throw Error("The clusterGridSize value must be a number greater or equal to 0");m=t-m;0>m&&(m+=360);this.degreePerPixel=m/p;this.clusterGridSize=u||null}};\nvar GeoPoint=function(){this.___class="GeoPoint";this.objectId=this.metadata=this.longitude=this.latitude=this.categories=void 0},GeoCluster=function(){this.geoQuery=this.totalPoints=this.objectId=this.metadata=this.longitude=this.latitude=this.categories=void 0},PublishOptionsHeaders={MESSAGE_TAG:"message",IOS_ALERT_TAG:"ios-alert",IOS_BADGE_TAG:"ios-badge",IOS_SOUND_TAG:"ios-sound",ANDROID_TICKER_TEXT_TAG:"android-ticker-text",ANDROID_CONTENT_TITLE_TAG:"android-content-title",ANDROID_CONTENT_TEXT_TAG:"android-content-text",\nANDROID_ACTION_TAG:"android-action",WP_TYPE_TAG:"wp-type",WP_TITLE_TAG:"wp-title",WP_TOAST_SUBTITLE_TAG:"wp-subtitle",WP_TOAST_PARAMETER_TAG:"wp-parameter",WP_TILE_BACKGROUND_IMAGE:"wp-backgroundImage",WP_TILE_COUNT:"wp-count",WP_TILE_BACK_TITLE:"wp-backTitle",WP_TILE_BACK_BACKGROUND_IMAGE:"wp-backImage",WP_TILE_BACK_CONTENT:"wp-backContent",WP_RAW_DATA:"wp-raw"},PublishOptions=function(m){m=m||{};this.publisherId=m.publisherId||void 0;this.headers=m.headers||void 0;this.subtopic=m.subtopic||void 0},\nDeliveryOptions=function(m){m=m||{};this.pushPolicy=m.pushPolicy||void 0;this.pushBroadcast=m.pushBroadcast||void 0;this.pushSinglecast=m.pushSinglecast||void 0;this.publishAt=m.publishAt||void 0;this.repeatEvery=m.repeatEvery||void 0;this.repeatExpiresAt=m.repeatExpiresAt||void 0},Bodyparts=function(m){m=m||{};this.textmessage=m.textmessage||void 0;this.htmlmessage=m.htmlmessage||void 0},SubscriptionOptions=function(m){m=m||{};this.subscriberId=m.subscriberId||void 0;this.subtopic=m.subtopic||void 0;\nthis.selector=m.selector||void 0};\n';
},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(94)["default"],o=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(117),c=o(s),u=function(e){function t(){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),t}(c["default"]);t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(89)["default"],r=n(94)["default"];Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){r(this,e),this._events=[],this._eventOne=[]}return a(e,[{key:"publish",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;t>a;a++)n[a-1]=arguments[a];for(this._checkEvent(e),this._events[e].forEach(function(e){e.apply(void 0,n)});this._eventOne[e].length;)this._eventOne[e].pop().apply(void 0,n)}},{key:"subscribe",value:function(e,t){this._checkEvent(e),this._events[e].push(t)}},{key:"subscribeOne",value:function(e,t){this._checkEvent(e),this._eventOne[e].push(t)}},{key:"_checkEvent",value:function(e){this._events[e]||(this._events[e]=[]),this._eventOne[e]||(this._eventOne[e]=[])}}]),e}();t["default"]=i,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(89)["default"],o=n(94)["default"],s=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(112),u=s(c),l=n(116),d=s(l),f=n(119),h=s(f),p=n(133),b=s(p),g=function(e){function t(){var e=this;o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.playerField=new h["default"],this.rivalField=new b["default"],this.userName=null,this.rivalName=null,this.backendless=new u["default"],this.subscribe("selectRival",function(t){return e.onSelectRival(t)}),this.subscribe("loginSuccess",function(t){return e.onSelectUser(t)}),this.rivalField.subscribe("clickFieldItem",function(t){return e.onClickRivalFieldItem(t)}),this.playerField.subscribe("answerCheckFieldItem",function(t){return e.onAnswerCheckFieldItem(t)}),this.playerField.subscribe("shipDestroy",function(t){return e.onDestroyShip(t)}),this.playerField.subscribe("gameFail",function(){return e.onGameFail()})}return r(t,e),i(t,[{key:"onSelectUser",value:function(e){this.userName=e,this.playerField.publish("showField")}},{key:"onSelectRival",value:function(e){this.rivalName=e,this.rivalField.publish("showField"),this.publish("showGameName",this.userName+" - "+this.rivalName),this.subscribeBass(this.userName+" - "+this.rivalName),this.publishBass({state:"start_game"})}},{key:"onClickRivalFieldItem",value:function(e){this.rivalField.publish("setLoadingState",!0),this.publishBass({state:"check_item",data:e})}},{key:"onAnswerCheckFieldItem",value:function(e){2==e.state?this.rivalField.publish("setBlockingState",!0):this.rivalField.publish("setBlockingState",!1),this.publishBass({state:"answer_check_item",data:e})}},{key:"onDestroyShip",value:function(e){this.publishBass({state:"set_empty_points",data:{points:e}})}},{key:"onGameFail",value:function(){this.publish("gameFail"),this.publishBass({state:"you_win"})}},{key:"subscribeBass",value:function(e){var t=this;this.backendless.subscribeBass(e,function(e){return t.onMessage(e)})}},{key:"onMessage",value:function(e){var t=this;e.messages.forEach(function(e){var n=JSON.parse(e.data);switch(n.state){case"start_game":t.rivalField.publish("activateField");break;case"check_item":t.playerField.publish("checkFieldItem",n.data);break;case"answer_check_item":t.rivalField.publish("setLoadingState",!1),t.rivalField.publish("setVirtualField",{location:n.data.location,state:n.data.state}),3==n.data.state&&t.rivalField.publish("setBlockingState",!0);break;case"set_empty_points":t.rivalField.publish("setEmptyPoints",n.data.points);break;case"you_win":t.publish("gameSuccess")}})}},{key:"publishBass",value:function(e){this.backendless.publishBass(this.userName,this.rivalName+" - "+this.userName,e)}}]),t}(d["default"]);t["default"]=g,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(89)["default"],o=n(94)["default"],s=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(120),u=s(c),l=n(127),d=s(l),f=function(e){function t(){var e=this;o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,{renderOptions:{className:"player_field"}}),this.ships=[],this.render(),this.generateShips(),this.aliveShips=this.ships.length,this.paintShips(),this.subscribe("checkFieldItem",function(t){return e.checkFieldItem(t)})}return r(t,e),i(t,[{key:"generateShips",value:function(){function e(e,t){var n=e+Math.random()*(t-e);return n=Math.round(n)}var t=e(0,d["default"].length-1);this.ships=d["default"][t]}},{key:"paintShips",value:function(){var e=this;this.ships.forEach(function(t){t.location.forEach(function(n){e.setVirtualField(n,1,t)})})}},{key:"checkFieldItem",value:function(e){var t=3;1==this.virtualField[e].state?(t=2,this.setVirtualField(e,t),this.virtualField[e].ship.amountAlive--,this.virtualField[e].ship.checkAlive()||(this.aliveShips--,this.publish("shipDestroy",this.virtualField[e].ship.nearbyPoints),this.setEmptyPoints(this.virtualField[e].ship.nearbyPoints),this.aliveShips||this.publish("gameFail"))):this.setVirtualField(e,t),this.publish("answerCheckFieldItem",{location:e,state:t})}}]),t}(u["default"]);t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(89)["default"],o=n(94)["default"],s=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(117),u=s(c),l=n(121),d=s(l),f=function(e){function t(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.view=new d["default"](n),this.virtualField=[],this.generateField(),this.subscribe("showField",function(){return e.showField()}),this.subscribe("setLoadingState",function(t){return e.onSetLoadingState(t)}),this.subscribe("setBlockingState",function(t){return e.onSetBlockingState(t)})}return r(t,e),i(t,[{key:"showField",value:function(){this.view.showField()}},{key:"render",value:function(){this.view.render()}},{key:"setVirtualField",value:function(e,t,n){var a=e;"object"==typeof e&&(a=this.getIndex(e)),n&&(this.virtualField[a].ship=n),this.virtualField[a].state=t,this.view.setItemState(t,a)}},{key:"setEmptyPoints",value:function(e){var t=this;e.forEach(function(e){0==t.virtualField[e].state&&t.setVirtualField(e,3)})}},{key:"_addLoading",value:function(){this.view.addLoading()}},{key:"_removeLoading",value:function(){this.view.removeLoading()}},{key:"onSetLoadingState",value:function(e){e?this._addLoading():this._removeLoading()}},{key:"_addBlocking",value:function(){this.view.addBlocking()}},{key:"_removeBlocking",value:function(){this.view.removeBlocking()}},{key:"onSetBlockingState",value:function(e){e?this._addBlocking():this._removeBlocking()}},{key:"generateField",value:function(){for(var e=0;100>e;e++)this.virtualField[e]={state:0,ship:null}}},{key:"getIndex",value:function(e){return 10*e[1]+e[0]}}]),t}(u["default"]);t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(89)["default"],o=n(94)["default"],s=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0}),n(122);var c=n(124),u=s(c),l=n(117),d=s(l),f=function(e){function t(e){var n=e.renderOptions;o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.renderOptions=n,this.template=u["default"],this.content=null}return r(t,e),i(t,[{key:"render",value:function(){var e=this,t=document.querySelector("#content_layout");if(!this.template)throw Error("template not defined");this.content=document.createElement("div"),this.content.innerHTML=this.template(this.renderOptions),t.appendChild(this.content);var n=this.content.querySelectorAll(".field_item");[].forEach.call(n,function(t,n){t.onclick=function(){return e.publish("clickFieldItem",n)}})}},{key:"showField",value:function(){this.content.className="show"}},{key:"activateField",value:function(){this.content.className+=" activate"}},{key:"setItemState",value:function(e,t){switch(e){case 1:this.getItem(t).className+=" ship";break;case 2:this.getItem(t).className+=" corrupted";break;case 3:this.getItem(t).className+=" empty"}}},{key:"getItem",value:function(e){return this.content.querySelectorAll(".field_item")[e]}},{key:"addLoading",value:function(){this.content.className+=" load"}},{key:"removeLoading",value:function(){this.content.className=this.content.className.replace(" load","")}},{key:"addBlocking",value:function(){this.content.className+=" blocked"}},{key:"removeBlocking",value:function(){this.content.className=this.content.className.replace(" blocked","")}}]),t}(d["default"]);t["default"]=f,e.exports=t["default"]},function(e,t){},,function(e,t,n){var a=n(125);e.exports=function(e){var t=[],n=e||{};return function(e){t.push("<div"+a.cls(["field",e],[null,!0])+">");for(var n=0;100>n;n++)t.push('<div class="field_item"></div>');t.push("</div>")}.call(this,"className"in n?n.className:"undefined"!=typeof className?className:void 0),t.join("")}},function(e,t,n){"use strict";function a(e){return null!=e&&""!==e}function r(e){return(Array.isArray(e)?e.map(r):e&&"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}):[e]).filter(a).join(" ")}function i(e){return s[e]||e}function o(e){var t=(e+"").replace(c,i);return t===""+e?e:t}t.merge=function u(e,t){if(1===arguments.length){for(var n=e[0],r=1;r<e.length;r++)n=u(n,e[r]);return n}var i=e["class"],o=t["class"];(i||o)&&(i=i||[],o=o||[],Array.isArray(i)||(i=[i]),Array.isArray(o)||(o=[o]),e["class"]=i.concat(o).filter(a));for(var s in t)"class"!=s&&(e[s]=t[s]);return e},t.joinClasses=r,t.cls=function(e,n){for(var a=[],i=0;i<e.length;i++)n&&n[i]?a.push(t.escape(r([e[i]]))):a.push(r(e[i]));var o=r(a);return o.length?' class="'+o+'"':""},t.style=function(e){return e&&"object"==typeof e?Object.keys(e).map(function(t){return t+":"+e[t]}).join(";"):e},t.attr=function(e,n,a,r){return"style"===e&&(n=t.style(n)),"boolean"==typeof n||null==n?n?" "+(r?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof n?(-1!==JSON.stringify(n).indexOf("&"),n&&"function"==typeof n.toISOString," "+e+"='"+JSON.stringify(n).replace(/'/g,"&apos;")+"'"):a?(n&&"function"==typeof n.toISOString," "+e+'="'+t.escape(n)+'"'):(n&&"function"==typeof n.toISOString," "+e+'="'+n+'"')},t.attrs=function(e,n){var a=[],i=Object.keys(e);if(i.length)for(var o=0;o<i.length;++o){var s=i[o],c=e[s];"class"==s?(c=r(c))&&a.push(" "+s+'="'+c+'"'):a.push(t.attr(s,c,!1,n))}return a.join("")};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},c=/[&<>"]/g;t.escape=o,t.rethrow=function l(e,t,a,r){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&t||r))throw e.message+=" on line "+a,e;try{r=r||n(126).readFileSync(t,"utf8")}catch(i){l(e,null,a)}var o=3,s=r.split("\n"),c=Math.max(a-o,0),u=Math.min(s.length,a+o),o=s.slice(c,u).map(function(e,t){var n=t+c+1;return(n==a?"  > ":"    ")+n+"| "+e}).join("\n");throw e.path=t,e.message=(t||"Jade")+":"+a+"\n"+o+"\n\n"+e.message,e},t.DebugItem=function(e,t){this.lineno=e,this.filename=t}},function(e,t){},function(e,t,n){"use strict";var a=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(128),i=a(r),o=n(130),s=a(o),c=n(131),u=a(c),l=n(132),d=a(l);t["default"]=[[new i["default"]({location:[[0,0]]}),new i["default"]({location:[[3,0]]}),new i["default"]({location:[[5,0]]}),new i["default"]({location:[[7,0]]}),new s["default"]({location:[[0,2],[1,2]]}),new s["default"]({location:[[4,2],[5,2]]}),new s["default"]({location:[[7,2],[8,2]]}),new u["default"]({location:[[0,4],[0,5],[0,6]]}),new u["default"]({location:[[2,4],[2,5],[2,6]]}),new d["default"]({location:[[5,4],[5,5],[5,6],[5,7]]})],[new i["default"]({location:[[0,0]]}),new i["default"]({location:[[0,7]]}),new i["default"]({location:[[5,0]]}),new i["default"]({location:[[7,7]]}),new s["default"]({location:[[0,3],[1,3]]}),new s["default"]({location:[[4,3],[5,3]]}),new s["default"]({location:[[7,3],[8,3]]}),new u["default"]({location:[[4,9],[3,9],[2,9]]}),new u["default"]({location:[[9,7],[9,6],[9,5]]}),new d["default"]({location:[[9,9],[8,9],[7,9],[6,9]]})],[new i["default"]({location:[[0,0]]}),new i["default"]({location:[[9,0]]}),new i["default"]({location:[[5,0]]}),new i["default"]({location:[[7,7]]}),new s["default"]({location:[[0,3],[1,3]]}),new s["default"]({location:[[4,3],[5,3]]}),new s["default"]({location:[[7,3],[8,3]]}),new u["default"]({location:[[0,9],[1,9],[2,9]]}),new u["default"]({location:[[0,7],[0,6],[0,5]]}),new d["default"]({location:[[9,9],[9,8],[9,7],[9,6]]})]],e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(94)["default"],o=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(129),c=o(s),u=function(e){function t(e){i(this,t),e.amount=1,a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return r(t,e),t}(c["default"]);t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(89)["default"],r=n(94)["default"];Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t){r(this,e),this.amount=t.amount,this.amountAlive=t.amount,this.location=t.location,this.calculateNearbyPoints()}return a(e,[{key:"checkAlive",value:function(){return this.amountAlive}},{key:"calculateNearbyPoints",value:function(){var e=this;this.nearbyPoints=[],this.location.forEach(function(t){for(var n=-1;2>n;n++)for(var a=-1;2>a;a++){var r=t[0]+n,i=t[1]+a;r>=0&&9>=r&&i>=0&&9>=i&&e.nearbyPoints.push(r+10*i)}})}}]),e}();t["default"]=i,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(94)["default"],o=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(129),c=o(s),u=function(e){function t(e){i(this,t),e.amount=2,a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return r(t,e),t}(c["default"]);t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(94)["default"],o=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(129),c=o(s),u=function(e){function t(e){i(this,t),e.amount=3,a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return r(t,e),t}(c["default"]);t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(94)["default"],o=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(129),c=o(s),u=function(e){function t(e){i(this,t),e.amount=4,a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return r(t,e),t}(c["default"]);t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(89)["default"],o=n(94)["default"],s=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(120),u=s(c),l=function(e){function t(){var e=this;o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,{renderOptions:{className:"rival_field"}}),this.render(),this.subscribe("activateField",function(){return e.activateField()}),this.subscribe("setVirtualField",function(t){return e.onSetVirtualField(t)}),this.subscribe("setEmptyPoints",function(t){e.onSetEmptyPoints(t)}),this.view.subscribe("clickFieldItem",function(t){return e.onClickFieldItem(t)})}return r(t,e),i(t,[{key:"onClickFieldItem",value:function(e){0==this.virtualField[e].state&&this.publish("clickFieldItem",e)}},{key:"activateField",value:function(){this.view.activateField()}},{key:"onSetVirtualField",value:function(e){this.setVirtualField(e.location,e.state)}},{key:"onSetEmptyPoints",value:function(e){this.setEmptyPoints(e)}}]),t}(u["default"]);t["default"]=l,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(89)["default"],o=n(94)["default"],s=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(135),u=s(c),l=n(138),d=s(l),f=function(e){function t(){var e=this;o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.view=new d["default"](this),this.view.subscribe("loginClick",function(t){return e.onClickLogin(t)}),this.view.subscribe("registrationClick",function(){return e.onClickRegistration()})}return r(t,e),i(t,[{key:"onClickLogin",value:function(e){this.publish("loginClick",e)}},{key:"onClickRegistration",value:function(){this.publish("registrationClick")}}]),t}(u["default"]);t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(89)["default"],o=n(94)["default"],s=n(96)["default"],c=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(117),l=c(u);n(136);var d=function(e){function t(){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}return r(t,e),i(t,[{key:"show",value:function(){this.publish("showModal",{})}},{key:"hide",value:function(){var e=this;return new s(function(t){if(!e.view)throw Error("view modal not defined");e.view.subscribeOne("onHideModal",function(){return t()}),e.publish("hideModal")})}},{key:"addErrorState",value:function(){if(!this.view)throw Error("view modal not defined");this.view.addErrorState()}}]),t}(l["default"]);t["default"]=d,e.exports=t["default"]},function(e,t){},,function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(89)["default"],o=n(94)["default"],s=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(139),u=s(c);n(140);var l=n(142),d=s(l),f=function(e){function t(e){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.template=d["default"],this.renderOptions={title:"Авторизация"}}return r(t,e),i(t,[{key:"onShow",value:function(){a(Object.getPrototypeOf(t.prototype),"onShow",this).call(this),this.initActions()}},{key:"initActions",value:function(){var e=this,t=document.querySelector("#modal_layout .email"),n=document.querySelector("#modal_layout .password"),a=document.querySelector("#modal_layout .login"),r=document.querySelector("#modal_layout .registration"),i=document.querySelectorAll("input");a.onclick=function(){return e.publish("loginClick",{email:t.value,password:n.value})},r.onclick=function(){return e.publish("registrationClick")},[].forEach.call(i,function(t){t.onfocus=function(){e.removeErrorState()}})}}]),t}(u["default"]);t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(89)["default"],o=n(94)["default"],s=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(117),u=s(c),l=function(e){function t(e){var n=this;o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.layout=document.querySelector("#modal_layout"),e.subscribe("showModal",function(){return n.onShow()}),e.subscribe("hideModal",function(){return n.onHide()})}return r(t,e),i(t,[{key:"render",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!this.template)throw Error("template not defined");this.layout.innerHTML=this.template(e)}},{key:"_show",value:function(){var e=this;this.layout.offsetHeight,this.layout.className="show",setTimeout(function(){return e.publish("onShowModal")},400)}},{key:"_hide",value:function(){var e=this;this.layout.className="",setTimeout(function(){return e.publish("onHideModal")},400)}},{key:"onShow",value:function(){this.render(this.renderOptions),this._show()}},{key:"onHide",value:function(){this._hide()}},{key:"addErrorState",value:function(){this.layout.className.includes("show")&&(this.layout.className="show error_state")}},{key:"removeErrorState",value:function(){this.layout.className.includes("show")&&(this.layout.className="show")}}]),t}(u["default"]);t["default"]=l,e.exports=t["default"]},function(e,t){},,function(e,t,n){var a=n(125);e.exports=function(e){var t,n=[],r=e||{};return function(e,r){n.push("<div"+a.cls(["modal",e],[null,!0])+'><div class="modal_middle"><div class="modal_content"><h1>'+a.escape(null==(t=r)?"":t)+'</h1><input type="email" name="email" placeholder="E-mail" class="email"><input type="password" name="password" placeholder="Пароль" class="password"><div class="buttons_block"><div class="button login">Войти</div><div class="button registration">Зарегистрироваться</div></div></div></div></div>')}.call(this,"modalClass"in r?r.modalClass:"undefined"!=typeof modalClass?modalClass:void 0,"title"in r?r.title:"undefined"!=typeof title?title:void 0),n.join("")}},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(89)["default"],o=n(94)["default"],s=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(135),u=s(c),l=n(144),d=s(l),f=function(e){function t(){var e=this;o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.view=new d["default"](this),this.view.subscribe("backClick",function(){return e.onClickBack()}),this.view.subscribe("registrationClick",function(t){return e.onClickRegistration(t)})}return r(t,e),i(t,[{key:"onClickBack",value:function(){this.publish("clickBack")}},{key:"onClickRegistration",value:function(e){this.publish("clickRegistration",e)}}]),t}(u["default"]);t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(89)["default"],o=n(94)["default"],s=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(139),u=s(c);n(145);var l=n(147),d=s(l),f=function(e){function t(e){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.template=d["default"],this.renderOptions={title:"Регистрация"}}return r(t,e),i(t,[{key:"onShow",value:function(){a(Object.getPrototypeOf(t.prototype),"onShow",this).call(this),this.initActions()}},{key:"initActions",value:function(){var e=this,t=document.querySelector("#modal_layout .name"),n=document.querySelector("#modal_layout .email"),a=document.querySelector("#modal_layout .password"),r=document.querySelector("#modal_layout .back"),i=document.querySelectorAll("input"),o=document.querySelector("#modal_layout .registration");r.onclick=function(){return e.publish("backClick")},o.onclick=function(){return e.publish("registrationClick",{name:t.value,email:n.value,password:a.value})},[].forEach.call(i,function(t){t.onfocus=function(){e.removeErrorState()}})}}]),t}(u["default"]);t["default"]=f,e.exports=t["default"]},function(e,t){},,function(e,t,n){var a=n(125);e.exports=function(e){var t,n=[],r=e||{};return function(e,r){n.push("<div"+a.cls(["modal",e],[null,!0])+'><div class="modal_middle"><div class="modal_content"><h1>'+a.escape(null==(t=r)?"":t)+'</h1><input type="text" name="name" placeholder="Имя" class="name"><input type="email" name="email" placeholder="E-mail" class="email"><input type="password" name="password" placeholder="Пароль" class="password"><div class="buttons_block"><div class="button back">Назад</div><div class="button registration">Зарегистрироваться</div></div></div></div></div>')}.call(this,"modalClass"in r?r.modalClass:"undefined"!=typeof modalClass?modalClass:void 0,"title"in r?r.title:"undefined"!=typeof title?title:void 0),n.join("")}},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(89)["default"],o=n(94)["default"],s=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(135),u=s(c),l=n(149),d=s(l),f=function(e){function t(){var e=this;o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.view=new d["default"](this),this.view.subscribe("selectRival",function(t){return e.onSelectRival(t)}),this.subscribe("addRival",function(t){return e.onAddRival(t)})}return r(t,e),i(t,[{key:"onAddRival",value:function(e){this.view.publish("addRival",e)}},{key:"onSelectRival",value:function(e){this.publish("selectRival",e)}}]),t}(u["default"]);t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(89)["default"],o=n(94)["default"],s=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(139),u=s(c);n(150);var l=n(152),d=s(l),f=function(e){function t(e){var n=this;o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.template=d["default"],this.renderOptions={title:"Выбери соперника",modalClass:"select_users_modal"},this.subscribe("addRival",function(e){return n.onAddRivals(e)})}return r(t,e),i(t,[{key:"onAddRivals",value:function(e){var t=this,n=document.createElement("ul");e.forEach(function(e){var a=document.createElement("li");a.innerText=e.name,a.onclick=function(){return t.publish("selectRival",e)},n.appendChild(a)});var a=document.querySelector(".user_list");a.appendChild(n)}}]),t}(u["default"]);t["default"]=f,e.exports=t["default"]},function(e,t){},,function(e,t,n){var a=n(125);e.exports=function(e){var t,n=[],r=e||{};return function(e,r){n.push("<div"+a.cls(["modal",e],[null,!0])+'><div class="modal_middle"><div class="modal_content"><h1>'+a.escape(null==(t=r)?"":t)+'</h1><div class="user_list"></div></div></div></div>')}.call(this,"modalClass"in r?r.modalClass:"undefined"!=typeof modalClass?modalClass:void 0,"title"in r?r.title:"undefined"!=typeof title?title:void 0),n.join("")}},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(94)["default"],o=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(135),c=o(s),u=n(154),l=o(u),d=function(e){function t(e){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.view=new l["default"](this,e.title)}return r(t,e),t}(c["default"]);t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";var a=n(9)["default"],r=n(44)["default"],i=n(94)["default"],o=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(139),c=o(s);n(155);var u=n(157),l=o(u),d=function(e){function t(e,n){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.template=l["default"],this.renderOptions={title:n}}return r(t,e),t}(c["default"]);t["default"]=d,e.exports=t["default"]},function(e,t){},,function(e,t,n){var a=n(125);e.exports=function(e){var t,n=[],r=e||{};return function(e,r){n.push("<div"+a.cls(["modal",e],[null,!0])+'><div class="modal_middle"><div class="modal_content"><h1>'+a.escape(null==(t=r)?"":t)+"</h1></div></div></div>")}.call(this,"modalClass"in r?r.modalClass:"undefined"!=typeof modalClass?modalClass:void 0,"title"in r?r.title:"undefined"!=typeof title?title:void 0),n.join("")}}]);